{"version":3,"sources":["tfw/converter/array.ts","tfw/converter/boolean.ts","tfw/layout/stack.tsx","tfw/converter/string.ts","tfw/converter/string-array.ts","tfw/gesture/moves.ts","tfw/gesture/finger.ts","tfw/gesture/basic-handler.ts","tfw/gesture.ts","tfw/converter/unit.ts","tfw/icons.ts","tfw/view/icon.tsx","tfw/converter/integer.ts","tfw/color.ts","tfw/theme.ts","tfw/converter/function.ts","tfw/behavior/touchable.ts","tfw/view/button.tsx","tfw/view/scroller.tsx","tfw/view/touchable.tsx","guide/view/card.tsx","tfw/view/image.tsx","guide/view/pack.tsx","App.tsx","tp/theme.tsx","guide/core-mocks.ts","guide/core-api.ts","guide/core.tsx","tp/splash.tsx","state/index.ts","index.tsx"],"names":["castArray","v","Array","isArray","castBoolean","defaultValue","arguments","length","undefined","text","trim","toLowerCase","num","parseInt","isNaN","Stack","_this","this","children","props","classes","scrollable","push","react_default","a","createElement","className","join","filter","elem","key","value","React","Component","castString","t","concat","castStringArray","defaultArray","defaultString","map","item","CAPACITY","Moves","x","y","Object","classCallCheck","_x0","_y0","_time0","_x","_y","_time","_cursor","init","now","fill","shift","idx","Date","idx0","idx1","_index","time","time0","time1","time01","idx2","time12","x0","x1","y0","y1","Finger","fingers","identifier","index","indexOf","indexOfFirstNull","BasicHandler","element","handleDown","handleUp","handleMove","pointerType","pointerTypeTime","deviceHandlers","handler","evt","checkPointerType","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","changedTouches","Symbol","iterator","next","done","touch","clientX","clientY","getIndex","buttons","pointer","clear","createClear","err","return","touchstart","addEventListener","call","_this2","mousedown","_this3","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","remove","touchend","_this4","mouseup","_this5","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","touchmove","_this6","mousemove","delay","handlers","_i","_eventNames","keys","eventName","removeEventListener","preventDefault","stopPropagation","SYMBOL","ID","STANDARD_EVENTS","Gesture","basicHandler","pointers","id","bind","assign","forEach","_len","gestureNames","_key","_gestureNames","gestureName","isDown","moves","rect","left","top","width","height","event","ptr","getPointer","getBoundingClientRect","hasHandlerFor","down","add","up","recognizeTap","recognizeSwipe","recognizePan","elapsedTime","Math","abs","startX","startY","tap","recognizePanDown","recognizePanUp","_ptr$moves","pan","sx","speedX","speedY","dx","pandown","panvertical","panup","recognizeSwipeDown","recognizeSwipeUp","recognizeSwipeLeft","_ptr$moves2","swipe","dy","swipedown","swipevertical","swipeup","swipeleft","swipehorizontal","gesture","RX_CSS_UNIT","draw","d","stroke","iconsBook","android","bug","camera","cancel","center","child","close","code","copy","counter","delete","direction","down-double","edit","eraser","export","flag-jp","r","flag-fr","flag-it","flag-de","flag-en","font","format-align-center","format-align-justify","format-align-left","format-align-right","format-bold","format-italic","format-float-center","format-float-left","format-float-none","format-float-right","format-header","format-underline","fullscreen","gear","gps","hand","heart","hide","home","image","import","improvement","info","left-double","link","location","logout","mail","map-layer","menu","minus","minus-o","minus-small","ok","pack","plug","plus","plus-o","plus-small","print","question","redo","refresh","right","right-double","run","search","select","sitemap","unselect","share","show","speaker","split-vertical","split-horizontal","star","stat","switch","tri-down","tri-left","tri-right","tri-up","twitter","undo","up-double","user","wait","zoom-in","zoom-out","warning","synonyms","back","help","save","_i2","_Object$keys2","val","EnumPenColor","Icon","possibleConstructorReturn","getPrototypeOf","refIcon","visible","timeoutHandle","name","sort","elemIcon","current","window","clearTimeout","requestAnimationFrame","classList","slot","onHide","setTimeout","p","animate","flipH","flipV","size","startsWith","m","exec","scalar","parseFloat","unit","castUnit","content","castContent","rotate","defVal","floor","hexa","substr","castInteger","onClick","svgContent","createSvgContent","transform","style","triggerVisibleAnimation","react","ref","viewBox","preserveAspectRatio","strokeWidth","strokeLinecap","strokeLinejoin","def","elementName","_parseDef","_ref","attributes","_ref2","slicedToArray","arg1","arg2","parseDef","attribs","split","attribName","attribValue","toUpperCase","CLASSES","manageColors","Color","codeCSS","R","G","B","H","S","L","A","parse","input","parseHexa","parseRGB","parseRGBA","parseHSL","luminance","color","hexa2","newColor","chroma","min","max","delta","INV6","charAt","INV15","INV255","RX_RGB","clamp01","RX_RGBA","RX_HSL","INV359","INV99","hsl2rgb","color1","color2","alpha","beta","newRGBA","newRGB","red","green","blue","out","toString","src_tfw_theme","register","registerTheme","apply","document","body","THEMES","css","console","error","bg0","makeGetCurrentColor","bg1","bg2","bg3","bgP","bgPD","bgPL","bgS","bgSD","bgSL","isDark","colorName","vars","$isDark","average","mix","luminanceStep","isThemeGloballyDark","varName","COLOR","THEME_COLOR_NAMES","themeName","_style","has0","has1","has2","has3","rgb2hsl","stringify","darkenBackground","color0","r0","g0","b0","color3","r3","g3","b3","completeBackgrounds","dark","light","rotateHue","white","black","bg","completeWithDefaultValues","s","pen","codeVariables","codeBackground","elevationColor","addAlpha","ELEVATIONS","elevationKey","elevation","codeElevation","_loop","depth","tail","fgColorName","bgColorName","styleFgColorName","styleBgColorName","bgClass","fgClass","position","piecesFG","piecesSVG","piecesBG","pop","codeText","styleElement","getElementsByTagName","appendChild","textContent","0","2","4","6","8","9","10","11","12","16","24","EMPTY_FUNCTION","Touchable","args","_element","_enabled","accent","onTap","enabled","castFunction","that","on","keydown","fire","removeTouchDisk","getComputedStyle","screen","div","createScreen","borderRadius","getPropertyValue","w","h","radius","ceil","sqrt","ripple","background","Theme","removeChild","Button","touchable","handleClick","assertThisInitialized","tag","label","icon","wide","flat","small","disabled","icon_Icon","Scroller","main","scrollTop","onRefresh","onRefreshAsked","refreshable","onPanDown","onScrollChange","scrollHeight","clientHeight","refreshing","button_Button","TouchableBehavior","tabIndex","Card","createRef","view_touchable_Touchable","Pack","img","Image","onload","onerror","src","backgroundImage","translate","fr","card_Card","image_Pack","title","shortDescription","App","stack_Stack","scroller_Scroller","packs","pack_Pack","connect","state","slice","refreshingPacks","dispatch","tp_theme","theme","msg","arg","onTrailPassionCoreMessage","MOCKS","getAppName","getInitialConfig","getPackImage","packId","random","getPacks","Api","mock","TrailPassionCore","lambda","core","wrap","CALLBACKS","funcName","api","Promise","resolve","reject","unreg","unregister","onError","log","onMessage","ex","Error","onTrailPassionCoreError","tp_splash","duration","logo","getElementById","parent","parentNode","transition","INITIAL_STATE","setRefreshingPacks","update","action","setPacks","setPackImage","url","store","createStore","type","debug","_callee","appName","regenerator_default","_context","prev","State","Core","sent","stop","_callee2","config","_context2","ReactDOM","render","es","src_App_0","Splash","abrupt","t0","finish","start"],"mappings":"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","file":"static/js/main.dc569e0f.chunk.js","sourcesContent":["export default function castArray(v: any): any[] {\n    if( Array.isArray(v)) return v;\n    return [v];\n}\n","export default function castBoolean(v: any, defaultValue = false): boolean {\n    switch (typeof v) {\n        case \"undefined\":\n            return defaultValue;\n        case \"boolean\":\n            return v;\n        case \"number\":\n            return v != 0;\n        case \"string\":\n            const text = v.trim().toLowerCase();\n            if (text === 'true' || text === 'yes') return true;\n            const num = parseInt(text);\n            if (!isNaN(num)) return num !== 0;\n            return false;\n        default:\n            return false;\n    }\n}\n","import React from \"react\"\nimport castArray from \"../converter/array\"\nimport castBoolean from \"../converter/boolean\"\nimport \"./stack.css\"\n\ninterface IStackProps {\n    value: string;\n    scrollable?: boolean;\n    children: React.ReactElement<any>[];\n}\n\nexport default class Stack extends React.Component<IStackProps, {}> {\n    render() {\n        const children = castArray(this.props.children);\n        const scrollable = castBoolean(this.props.scrollable, false);\n        const classes = [\"tfw-layout-stack\"];\n        if( scrollable) classes.push(\"scrollable\");\n        return (\n            <div className={classes.join(\" \")}>{\n                children.filter(elem => elem.key == this.props.value)\n            }</div>\n        );\n    }\n}\n","export default function castString(value: any, defaultValue: string): string {\n    const t = typeof value;\n    if (t === 'number' && !isNaN(value)) {\n        return `${value}`;\n    }\n    if (t === 'string') return value;\n    return defaultValue;\n}\n","import castString from \"./string\";\n\n/**\n * If `value` is not an array, return `defaultArray`.\n * Else if `defaultString` is undefined, return `value`.\n * Else return a copy of `value` with a castString on all its elements.\n *\n * @param   value         [description]\n * @param   defaultArray  [description]\n * @param   defaultString [description]\n * @returns               [description]\n */\nexport default function castStringArray(\n    value: any, defaultArray: string[] = [], defaultString: string = \"\"\n) {\n    if (typeof value === 'string') return [value];\n    if (!Array.isArray(value)) return defaultArray;\n    if (typeof defaultString === 'undefined') return value;\n    return value.map(item => castString(item, defaultString));\n}\n","const CAPACITY = 3;\n\n/**\n * Helper to manage a pointer move.\n * It gives you the location, the speed and the acceleration of your pointer.\n *\n * @type {[type]}\n */\nexport default class Moves {\n    private _x0: number;\n    private _y0: number;\n    private _time0: number;\n    private _x: number[] = new Array(CAPACITY);\n    private _y: number[] = new Array(CAPACITY);\n    private _time: number[] = new Array(CAPACITY);\n    private _cursor: number = 0;\n\n    constructor(x: number = 0, y: number = 0) {\n        this.init(x, y);\n    }\n\n    init(x: number, y: number) {\n        this._time0 = this.now;\n        this._x0 = x;\n        this._y0 = y;\n        this._x = this._x.fill(this._x0, 0, CAPACITY);\n        this._y = this._y.fill(this._y0, 0, CAPACITY);\n        this._time = this._time.fill(this._time0, 0, CAPACITY);\n    }\n\n    _index(shift: number) {\n        return (this._cursor + shift) % CAPACITY;\n    }\n\n    get now() { return Date.now(); }\n\n    add(x: number, y: number) {\n        const idx = (this._cursor + CAPACITY - 1) % CAPACITY;\n        this._time[idx] = this.now;\n        this._x[idx] = x;\n        this._y[idx] = y;\n        this._cursor = idx;\n    }\n\n    get elapsedTime() { return this.now - this._time0; }\n\n    get x() { return this._x[this._cursor]; }\n    get y() { return this._y[this._cursor]; }\n\n    get startX() { return this._x0; }\n    get startY() { return this._y0; }\n\n    get speedX() {\n        const idx0 = this._cursor;\n        const idx1 = this._index(1);\n        const time = this._time[idx0] - this._time[idx1];\n        if (time <= 0) return 0;\n        return (this._x[idx0] - this._x[idx1]) / time;\n    }\n\n    get speedY() {\n        const idx0 = this._cursor;\n        const idx1 = this._index(1);\n        const time = this._time[idx0] - this._time[idx1];\n        if (time <= 0) return 0;\n        return (this._y[idx0] - this._y[idx1]) / time;\n    }\n\n    get accelX() {\n        const idx0 = this._index(0);\n        const time0 = this._time[idx0];\n\n        const idx1 = this._index(1);\n        const time1 = this._time[idx1];\n\n        const time01 = time0 - time1;\n\n        if (time01 <= 0) return 0;\n\n        const idx2 = this._index(2);\n        const time2 = this._time[idx2];\n\n        const time12 = time1 - time2;\n\n        if (time12 <= 0) return 0;\n\n        const x0 = this._x[idx0];\n        const x1 = this._x[idx1];\n        const x2 = this._x[idx2];\n\n        const speed01 = (x0 - x1) / time01;\n        const speed12 = (x1 - x2) / time12;\n\n        return (speed01 - speed12) / time01;\n    }\n\n    get accelY() {\n        const idx0 = this._index(0);\n        const time0 = this._time[idx0];\n\n        const idx1 = this._index(1);\n        const time1 = this._time[idx1];\n\n        const time01 = time0 - time1;\n\n        if (time01 <= 0) return 0;\n\n        const idx2 = this._index(2);\n        const time2 = this._time[idx2];\n\n        const time12 = time1 - time2;\n\n        if (time12 <= 0) return 0;\n\n        const y0 = this._y[idx0];\n        const y1 = this._y[idx1];\n        const y2 = this._y[idx2];\n\n        const speed01 = (y0 - y1) / time01;\n        const speed12 = (y1 - y2) / time12;\n\n        return (speed01 - speed12) / time01;\n    }\n}\n","type TIdentifier = number | null;\n\nexport default class Finger {\n    private fingers: TIdentifier[] = [];\n\n    getIndex(identifier: number): number {\n        const index = this.fingers.indexOf(identifier);\n        if (index !== -1) return index;\n        const indexOfFirstNull = this.fingers.indexOf(null);\n        if (indexOfFirstNull !== -1) {\n            this.fingers[indexOfFirstNull] = identifier;\n            return indexOfFirstNull;\n        }\n        this.fingers.push(identifier);\n        return this.fingers.length - 1;\n    }\n\n    remove(identifier: number) {\n        const index = this.fingers.indexOf(identifier);\n        if (index !== -1) this.fingers[index] = null;\n    }\n}\n","/**\n * BasicHandler(\n *     element: HTMLElement,\n *     handleDown: TBasicHandler,\n *     handleUp: TBasicHandler,\n *     handleMove: TBasicHandler\n * )\n *\n * Deals with three basic events : DOWN, UP and MOVE.\n * If the device has several input pointers, we will return\n * only one event.\n *\n * A TBasicHandler is a synthetic event object:\n *   - x: X coordinate relative to the viewport, not including any scroll offset.\n *   - y: Y coordinate relative to the viewport, not including any scroll offset.\n *   - index: For multi-touch system. The first one is 0, the second is 1, etc.\n *   - buttons: 1 = left, 2 = right.\n *   - pointer: \"mouse\" | \"touch\" | \"pen\".\n *   - clear(): Call stopPropagation() and preventDefault() on this event.\n *\n */\nimport Finger from \"./finger\"\nimport {IBasicEvent} from \"./basic-handler.types\"\n\ninterface ITouch {\n    identifier: number;\n    clientX: number;\n    clientY: number;\n}\n\ninterface ITouchEvent {\n    changedTouches: ITouch[];\n}\ntype TTouchEventHandler = (evt:ITouchEvent) => void;\n\ninterface IMouseEvent {\n    clientX: number;\n    clientY: number;\n    buttons: number;\n}\ntype TMouseEventHandler = (evt:IMouseEvent) => void;\n\ntype TDeviceEventHandler = TTouchEventHandler|TMouseEventHandler;\n\ntype TBasicHandler = (evt: IBasicEvent) => void | undefined;\n\ntype TBasicEventName = \"mousedown\";\n\ninterface IDeviceHandlers {\n    touchstart?: TTouchEventHandler;\n    touchend?: TTouchEventHandler;\n    touchmove?: TTouchEventHandler;\n    mousedown?: TMouseEventHandler;\n    mouseup?: TMouseEventHandler;\n    mousemove?: TMouseEventHandler;\n}\n\nexport default class BasicHandler {\n    readonly element: HTMLElement;\n    pointerType: string = \"\";\n    pointerTypeTime: number = 0;\n    deviceHandlers: IDeviceHandlers = {};\n    fingers: Finger = new Finger();\n\n    constructor(element: HTMLElement,\n        handleDown: TBasicHandler,\n        handleUp: TBasicHandler,\n        handleMove: TBasicHandler) {\n        this.element = element;\n        attachDownEvent.call(this, handleDown);\n        attachUpEvent.call( this, handleUp );\n        attachMoveEvent.call( this, handleMove );\n    }\n\n    /**\n     * If you device can hold mouse and touch events, you will receive two events.\n     * This function prevent it.\n     *\n     * @param   {string} pointerType\n     * @returns {boolean} If `false`, we must ignore this event.\n     */\n    checkPointerType(pointerType: string) {\n        const now = Date.now();\n        const delay = now - this.pointerTypeTime;\n        this.pointerTypeTime = now;\n        if (this.pointerType.length === 0 || delay > 500) {\n            // If the user wat more than 500ms, he can change of pointer.\n            this.pointerType = pointerType;\n            return true;\n        }\n        return this.pointerType === pointerType;\n    }\n\n    detachEvents() {\n        const element = this.element;\n        const handlers = this.deviceHandlers;\n        const eventNames = Object.keys(handlers);\n        for (const eventName of eventNames) {\n            const handler: TDeviceEventHandler|undefined = handlers[eventName as TBasicEventName];\n            element.removeEventListener(eventName, handler, false);\n        }\n    }\n}\n\n\nfunction attachDownEvent(this: BasicHandler, handleDown: TBasicHandler) {\n    attachDownEventTouch.call(this, handleDown);\n    attachDownEventMouse.call(this, handleDown);\n}\n\n\nfunction attachDownEventTouch(this: BasicHandler, handleDown: TBasicHandler) {\n    const { element, deviceHandlers } = this;\n    const handler = (evt: ITouchEvent) => {\n        if (!this.checkPointerType(\"touch\")) return;\n        for (const touch of evt.changedTouches) {\n            handleDown({\n                x: touch.clientX,\n                y: touch.clientY,\n                index: this.fingers.getIndex(touch.identifier),\n                buttons: 1,\n                pointer: \"touch\",\n                clear: createClear(evt)\n            });\n        }\n    };\n    deviceHandlers.touchstart = handler;\n    element.addEventListener(\"touchstart\", handler, false);\n}\n\n\nfunction attachDownEventMouse(this: BasicHandler, handleDown: TBasicHandler) {\n    const { element, deviceHandlers } = this;\n    const handler = (evt: IMouseEvent) => {\n        if (!this.checkPointerType(\"mouse\")) return;\n        handleDown({\n            x: evt.clientX,\n            y: evt.clientY,\n            index: 0,\n            buttons: evt.buttons,\n            pointer: \"mouse\",\n            clear: createClear(evt)\n        });\n    };\n    deviceHandlers.mousedown = handler;\n    element.addEventListener(\"mousedown\", handler, false);\n}\n\n\nfunction attachUpEvent(this: BasicHandler, handleUp: TBasicHandler) {\n    attachUpEventTouch.call(this, handleUp);\n    attachUpEventMouse.call(this, handleUp);\n}\n\n\nfunction attachUpEventTouch(this: BasicHandler, handleUp: TBasicHandler) {\n    const { element, deviceHandlers } = this;\n    const handler = (evt: ITouchEvent) => {\n        if (!this.checkPointerType(\"touch\")) return;\n        for (const touch of evt.changedTouches) {\n            handleUp({\n                x: touch.clientX,\n                y: touch.clientY,\n                index: this.fingers.getIndex(touch.identifier),\n                buttons: 1,\n                pointer: \"touch\",\n                clear: createClear(evt)\n            });\n            this.fingers.remove(touch.identifier)\n        }\n    };\n    deviceHandlers.touchend = handler;\n    element.addEventListener(\"touchend\", handler, false);\n}\n\n\nfunction attachUpEventMouse(this: BasicHandler, handleUp: TBasicHandler) {\n    const { element, deviceHandlers } = this;\n    const handler = (evt: IMouseEvent) => {\n        if (!this.checkPointerType(\"mouse\")) return;\n        handleUp({\n            x: evt.clientX,\n            y: evt.clientY,\n            index: 0,\n            buttons: evt.buttons,\n            pointer: \"mouse\",\n            clear: createClear(evt)\n        });\n    };\n    deviceHandlers.mouseup = handler;\n    element.addEventListener(\"mouseup\", handler, false);\n}\n\n\n\n\nfunction attachMoveEvent(this: BasicHandler, handleMove: TBasicHandler) {\n    attachMoveEventTouch.call(this, handleMove);\n    attachMoveEventMouse.call(this, handleMove);\n}\n\n\nfunction attachMoveEventTouch(this: BasicHandler, handleMove: TBasicHandler) {\n    const { element, deviceHandlers } = this;\n    const handler = (evt: ITouchEvent) => {\n        if (!this.checkPointerType(\"touch\")) return;\n        for (const touch of evt.changedTouches) {\n            handleMove({\n                x: touch.clientX,\n                y: touch.clientY,\n                index: this.fingers.getIndex(touch.identifier),\n                buttons: 1,\n                pointer: \"touch\",\n                clear: createClear(evt)\n            });\n            this.fingers.remove(touch.identifier)\n        }\n    };\n    deviceHandlers.touchmove = handler;\n    element.addEventListener(\"touchmove\", handler, false);\n}\n\n\nfunction attachMoveEventMouse(this: BasicHandler, handleMove: TBasicHandler) {\n    const { element, deviceHandlers } = this;\n    const handler = (evt: IMouseEvent) => {\n        if (!this.checkPointerType(\"mouse\")) return;\n        handleMove({\n            x: evt.clientX,\n            y: evt.clientY,\n            index: 0,\n            buttons: evt.buttons,\n            pointer: \"mouse\",\n            clear: createClear(evt)\n        });\n    };\n    deviceHandlers.mousemove = handler;\n    element.addEventListener(\"mousemove\", handler, false);\n}\n\n\nfunction createClear(evt) {\n    return () => {\n        evt.preventDefault();\n        evt.stopPropagation();\n    }\n}\n","/**\n * Here is the list of all parameters used if all the handlers.\n *\n * tap({ x: number, y: number, index: number })\n *\n */\n\nimport Moves from \"./gesture/moves\"\nimport BasicHandler from \"./gesture/basic-handler\"\nimport { IBasicEvent } from \"./gesture/basic-handler.types\"\n\nconst SYMBOL = Symbol(\"gesture\");\n\nlet ID = 0;\n\ntype TGestureName = \"tap\" | \"down\" | \"up\"\n    | \"pan\" | \"pandown\" | \"panup\" | \"panvertical\"\n    | \"swipe\" | \"swipedown\" | \"swipeup\" | \"swipevertical\"\n    | \"swipeleft\";\ntype TEventName = \"keydown\" | \"keyup\";\ntype THandlers = {\n    [key: TGestureName | TEventName]: (event: IEvent) => void;\n};\n\ninterface IEvent {\n    preventDefault: () => void;\n    stopPropagation: () => void;\n    target: HTMLElement;\n    x?: number;\n    y?: number;\n}\n\ninterface IInternalEvent {\n    x?: number;\n    y?: number;\n    event: PointerEvent;\n}\n\ninterface IPointer {\n    isDown: boolean;\n    moves: Moves;\n    rect: {\n        left: number;\n        top: number;\n        width: number;\n        height: number;\n    };\n    type: string | null;\n    time: number;\n    id: number;\n}\n\nconst STANDARD_EVENTS = [\"keydown\", \"keyup\"];\n\nclass Gesture {\n    private readonly basicHandler: BasicHandler;\n    private handlers: THandlers;\n    private element: HTMLElement;\n    private readonly pointers: IPointer[];\n    private readonly id: number;\n\n    constructor(private elem: HTMLElement) {\n        elem[SYMBOL] = this;\n        this.id = ID++;\n        this.element = elem;\n        this.handlers = {};\n        this.basicHandler = new BasicHandler(\n            elem,\n            this.handleDown.bind(this),\n            this.handleUp.bind(this),\n            this.handleMove.bind(this)\n        )\n        this.pointers = new Array(3);\n    }\n\n    get identifier() { return this.id; }\n\n    on(handlers: THandlers) {\n        this.handlers = Object.assign(this.handlers, handlers);\n        Object.keys(this.handlers).forEach(eventName => {\n            if (STANDARD_EVENTS.indexOf(eventName) === -1) return;\n            // This is a non-pointer event. (i.e., keyboard, resize, ...)\n            this.element.addEventListener(eventName, this.handlers[eventName], false);\n        });\n    }\n\n    /**\n     * Check if a gesture has an handler attached.\n     *\n     * @param   {TGestureName[]}  gestureNames - Name of the gesture.\n     * @returns {boolean} true if the gesture is mapped to a handler.\n     */\n    hasHandlerFor(...gestureNames: TGestureName[]): boolean {\n        for (const gestureName of gestureNames) {\n            if (typeof this.handlers[gestureName] === 'function') return true;\n        }\n        return false;\n    }\n\n    private getPointer(index: number) {\n        const pointers = this.pointers;\n        if (typeof pointers[index] === 'undefined') {\n            pointers[index] = {\n                isDown: false,\n                moves: new Moves(0, 0),\n                rect: { left: 0, top: 0, width: 0, height: 0 }\n            }\n        }\n        return pointers[index];\n    }\n\n    private handleDown(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const { element } = this;\n        const ptr = this.getPointer(event.index);\n        ptr.isDown = true;\n        ptr.rect = element.getBoundingClientRect();\n        const x = event.x - ptr.rect.left;\n        const y = event.y - ptr.rect.top;\n        ptr.moves.init(x, y);\n\n        if (this.hasHandlerFor(\"down\")) {\n            this.handlers.down(Object.assign(event, { x, y }));\n        }\n    }\n\n    private handleUp(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const ptr = this.getPointer(event.index);\n        ptr.isDown = false;\n        const x = event.x - ptr.rect.left;\n        const y = event.y - ptr.rect.top;\n        ptr.moves.add(x, y);\n\n        if (this.hasHandlerFor(\"up\")) {\n            this.handlers.up(Object.assign(event, { x, y }));\n        }\n        this.recognizeTap(event, ptr);\n        this.recognizeSwipe(event, ptr);\n    }\n\n    private handleMove(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const ptr = this.getPointer(event.index);\n        const x = event.x - ptr.rect.left;\n        const y = event.y - ptr.rect.top;\n        ptr.moves.add(x, y);\n        this.recognizePan(event, ptr);\n    }\n\n    private recognizeTap(evt: IBasicEvent, ptr: IPointer) {\n        // A tap is recognized only if there is less than 400ms\n        // between down and up, and if the pointer has not moves more\n        // than 16px.\n        if (!this.hasHandlerFor(\"tap\") || ptr.moves.elapsedTime > 400) return;\n        const moves = ptr.moves;\n        const dx = Math.abs(moves.x - moves.startX);\n        if (dx > 16) return;\n        const dy = Math.abs(moves.y - moves.startY);\n        if (dy > 16) return;\n\n        evt.clear();\n        this.handlers.tap(Object.assign(evt, { x: moves.x, y: moves.y }));\n    }\n\n    private recognizePan(evt: IBasicEvent, ptr: IPointer) {\n        if (!ptr.isDown) return;\n        this.recognizePanDown(evt, ptr);\n        this.recognizePanUp(evt, ptr);\n        if (this.hasHandlerFor(\"pan\")) {\n            const { x, y, startX, startY } = ptr.moves;\n            this.handlers.pan(Object.assign(evt, { x, y, startX, startY }));\n        }\n    }\n\n    private recognizePanDown(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"pandown\", \"panvertical\")) return;\n\n        // Check that we are panning down.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n\n        if (this.hasHandlerFor(\"pandown\")) {\n            this.handlers.pandown(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n        if (this.hasHandlerFor(\"panvertical\")) {\n            this.handlers.panvertical(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n    }\n\n    private recognizePanUp(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"panup\", \"panvertical\")) return;\n\n        // Check that we are panning up.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = -moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.startY - moves.y;\n        if (dy < dx) return;\n\n        if (this.hasHandlerFor(\"panup\")) {\n            this.handlers.panup(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n        if (this.hasHandlerFor(\"panvertical\")) {\n            this.handlers.panvertical(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n    }\n\n    private recognizeSwipe(evt: IBasicEvent, ptr: IPointer) {\n        this.recognizeSwipeDown(evt, ptr);\n        this.recognizeSwipeUp(evt, ptr);\n        this.recognizeSwipeLeft(evt, ptr);\n        if (this.hasHandlerFor(\"swipe\")) {\n            const { x, y, startX, startY } = ptr.moves;\n            this.handlers.swipe(Object.assign(evt, { x, y, startX, startY }));\n        }\n    }\n\n    private recognizeSwipeDown(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipedown\", \"swipevertical\")) return;\n\n        // Check that we are panning down.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dy / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.hasHandlerFor(\"swipedown\")) {\n            this.handlers.swipedown(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n        if (this.hasHandlerFor(\"swipevertical\")) {\n            this.handlers.swipevertical(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n    }\n\n    private recognizeSwipeUp(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipeup\", \"swipevertical\")) return;\n\n        // Check that we are panning up.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dy / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.hasHandlerFor(\"swipeup\")) {\n            this.handlers.swipeup(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n        if (this.hasHandlerFor(\"swipevertical\")) {\n            this.handlers.swipevertical(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n    }\n\n    private recognizeSwipeLeft(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipeleft\", \"swipehorizontal\")) return;\n\n        // Check that we are panning left.\n        const moves = ptr.moves;\n        const sx = -moves.speedX;\n        const sy = Math.abs(moves.speedY);\n        if (sx < sy) return;\n        // Check that the final point is beneath the initial one.\n        const dx = moves.startX - moves.x;\n        const dy = Math.abs(moves.y - moves.startY);\n        if (dx < dy) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dx / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.hasHandlerFor(\"swipeleft\")) {\n            this.handlers.swipeleft(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n        if (this.hasHandlerFor(\"swipehorizontal\")) {\n            this.handlers.swipehorizontal(Object.assign(evt, { x: moves.x, y: moves.y }));\n        }\n    }\n}\n\nexport default function(elem: HTMLElement): Gesture {\n    if (!elem[SYMBOL]) {\n        elem[SYMBOL] = new Gesture(elem);\n    }\n    return elem[SYMBOL];\n}\n","\"use strict\";\n\nconst RX_CSS_UNIT = /^(-?[.0-9]+)[ \\n\\r]*([a-z%]*)/;\n\nexport default function castUnit(v: any, defaultValue: string = \"100%\") {\n    if (typeof v === 'number') return `${v}px`;\n    if (typeof v !== 'string') return defaultValue;\n    const text = `${v}`.trim().toLowerCase();\n    if (text === 'auto' || text === 'inherit') return text;\n    if (text.startsWith(\"calc(\")) return text;\n    const m = RX_CSS_UNIT.exec(text);\n    if (!m) return defaultValue;\n    const scalar = parseFloat(m[1]);\n    if (isNaN(scalar) || scalar === 0) return \"0\";\n    const unit = m[2].length < 1 ? \"px\" : m[2];\n    return `${scalar}${unit}`;\n}\n","\"use strict\";\n\n/**\n * @module\n * This module provides a list of SVG icons definitions.\n * You can register new one if you wish.\n */\n\n\nexport type TIconDefinition =\n    [string, {}] |\n    [string, TIconDefinitionArray] |\n    [string, {}, TIconDefinitionArray] |\n    [string, TIconDefinitionArray, {}];\n\ninterface TIconDefinitionArray extends Array<TIconDefinition> { }\n\nexport interface IIconsDefinition {\n    [name: string]: TIconDefinition\n}\n\n\n\n/**\n * Register new icons.\n * @param {object}  icons - The  keys are the  name of the  icons, the\n * value is the object representing an SVG image.\n * @returns {undefined}\n */\nexport function register(icons: IIconsDefinition): void {\n    for (const key of Object.keys(icons)) {\n        const val: TIconDefinition = icons[key];\n        iconsBook[key] = val;\n    }\n};\n\n/**\n * @param {string} d - Path definition, as in the attribute `d` of the\n * SVG tag `path`.\n * @returns {array} SVG description.\n */\nfunction draw(d: string): TIconDefinition {\n    return ['path', { d, stroke: 'none', fill: 0 }];\n}\n\n\nexport const iconsBook: IIconsDefinition = {\n    android: draw('M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z'),\n    bug: draw(\"M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z\"),\n    camera: draw('M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z'),\n    cancel: draw('M7,0L35,28V35H28L0,7L-28,35H-35V28L-7,0L-35,-28V-35H-28L0,-7L28,-35H35V-28L7,0Z'),\n    center: draw(\n        'M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z'\n    ),\n    child: draw('M5,-50V-10H45A40,40,0,0,0,5,-50M37,19C42,13,45,4,45,-5H-28L-32,-15H-50V-5H-39C-39,-5,-29,15,-28,17C-34,20,-37,26,-37,33A18,18,0,0,0,-20,50C-11,50,-4,44,-3,35H8C9,44,16,50,25,50A18,18,0,0,0,43,33C43,27,40,23,37,19M-20,40A8,8,0,0,1,-27,33A8,8,0,0,1,-20,25A8,8,0,0,1,-12,33A8,8,0,0,1,-20,40M25,40A8,8,0,0,1,18,33A8,8,0,0,1,25,25A8,8,0,0,1,33,33A8,8,0,0,1,25,40Z'),\n    close: draw('M0,-50C28,-50,50,-28,50,0C50,28,28,50,0,50C-28,50,-50,28,-50,0C-50,-28,-28,-50,0,-50M18,-25L0,-7L-18,-25L-25,-18L-7,0L-25,18L-18,25L0,7L18,25L25,18L7,0L25,-18L18,-25Z'),\n    code: draw('M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z'),\n    copy: draw('M35,45H-20V-25H35M35,-35H-20A10,10,0,0,0,-30,-25V45A10,10,0,0,0,-20,55H35A10,10,0,0,0,45,45V-25A10,10,0,0,0,35,-35M20,-55H-40A10,10,0,0,0,-50,-45V25H-40V-45H20V-55Z'),\n    counter: draw('M-40,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M-40,-30V30H-5V-30H-40M40,30V-30H34C35,-27,35,-25,35,-24C34,-21,32,-17,31,-16L20,-3L36,-4L36,3L10,2L10,-3C10,-3,25,-19,26,-20C27,-22,30,-30,23,-30C16,-30,17,-23,17,-23L9,-23C9,-23,9,-27,11,-30H5V30H18L18,26L23,26C23,26,27,25,27,20C28,15,23,15,23,15C22,15,17,16,17,20H10C10,20,10,9,23,9C36,9,35,20,35,20C35,20,35,26,29,28L32,30H40M-15,20H-23V-9L-32,-6V-12L-16,-18H-15V20Z'),\n    delete: draw(\n        'M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z'),\n    direction: draw('M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z'),\n    down: draw('M-30,-30L0,30,30,-30'),\n    'down-double': draw('M-30,-40L0,-10,30,-40M-30,10L0,40,30,10'),\n    edit: draw(\n        \"M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16\"\n    ),\n    eraser: draw('M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z'),\n    'export': draw('M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z'),\n    \"flag-jp\": [\"g\", {\n        stroke: \"none\"\n    },\n        [\n            [\"path\", {\n                fill: \"#000\",\n                d: \"M-65,50h130v-100h-130z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-60,45h120v-90h-120z\"\n            }],\n            [\"circle\", {\n                fill: \"#bc002d\",\n                r: 24\n            }]\n        ]\n    ],\n    \"flag-fr\": [\"g\", {\n        stroke: \"none\"\n    },\n        [\n            [\"path\", {\n                fill: \"#000\",\n                d: \"M-65,50h130v-100h-130z\"\n            }],\n            [\"path\", {\n                fill: \"#002395\",\n                d: \"M-60,45h40v-90h-40z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-20,45h40v-90h-40z\"\n            }],\n            [\"path\", {\n                fill: \"#ed2939\",\n                d: \"M20,45h40v-90h-40z\"\n            }]\n        ]\n    ],\n    \"flag-it\": [\"g\", {\n        stroke: \"none\"\n    },\n        [\n            [\"path\", {\n                fill: \"#000\",\n                d: \"M-65,50h130v-100h-130z\"\n            }],\n            [\"path\", {\n                fill: \"#009246\",\n                d: \"M-60,45h40v-90h-40z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-20,45h40v-90h-40z\"\n            }],\n            [\"path\", {\n                fill: \"#ce2b37\",\n                d: \"M20,45h40v-90h-40z\"\n            }]\n        ]\n    ],\n    \"flag-de\": [\"g\", {\n        stroke: \"none\"\n    },\n        [\n            [\"path\", {\n                fill: \"#000\",\n                d: \"M-65,41h130v-82h-130z\"\n            }],\n            [\"path\", {\n                fill: \"#ffce00\",\n                d: \"M-60,36h120v-24h-120z\"\n            }],\n            [\"path\", {\n                fill: \"#dd0000\",\n                d: \"M-60,12h120v-24h-120z\"\n            }]\n        ]\n    ],\n    \"flag-en\": [\"g\", {\n        stroke: \"none\"\n    },\n        [\n            [\"path\", {\n                fill: \"#000\",\n                d: \"M-65,37h130v-75h-130z\"\n            }],\n            [\"path\", {\n                fill: \"#bb133e\",\n                d: \"M-60,32h120v-65h-120z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-60,22h120v5h-120z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-60,12h120v5h-120z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-60,2h120v5h-120z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-60,-8h120v5h-120z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-60,-18h120v5h-120z\"\n            }],\n            [\"path\", {\n                fill: \"#fff\",\n                d: \"M-60,-28h120v5h-120z\"\n            }],\n            [\"path\", {\n                fill: \"#002664\",\n                d: \"M-60,-33h48v35h-48z\"\n            }],\n\n        ]\n    ],\n    font: draw('M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z'),\n    'format-align-center': draw('M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z'),\n    'format-align-justify': draw('M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z'),\n    'format-align-left': draw('M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z'),\n    'format-align-right': draw(' M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z '),\n    'format-bold': draw('M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z'),\n    'format-italic': draw('M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z'),\n    'format-float-center': draw('M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z'),\n    'format-float-left': draw('M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\n    'format-float-none': draw('M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\n    'format-float-right': draw('M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\n    'format-header': draw('M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z'),\n    'format-underline': draw(\n        'M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z'\n    ),\n    fullscreen: draw('M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z'),\n    gear: draw(\n        'M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z'\n    ),\n    gps: draw(\n        'M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z'\n    ),\n    hand: draw(\n        \"M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z\"\n    ),\n    heart: draw('M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z'),\n    hide: draw(\n        'M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z'\n    ),\n    home: draw('M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z'),\n    image: draw('M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z'),\n    import: draw('M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z'),\n    improvement: draw(\"M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z\"),\n    info: draw('M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z'),\n    left: ['path', { fill: 0, d: 'M40,-5V5H-20L8,33L0,40L-39,0L0,-40L8,-32L-20,-5H40Z' }],\n    'left-double': draw('M-10,-30L-40,0,-10,30M40,-30L10,0,40,30'),\n    link: draw('M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z'),\n    location: draw('M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z'),\n    logout: draw(\n        \"M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z\"\n    ),\n    mail: draw(\n        'M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z'\n    ),\n    map: draw('M15,35L-15,24V-35L15,-24M43,-45C42,-45,42,-45,42,-45L15,-34L-15,-45L-43,-35C-44,-35,-45,-34,-45,-33V43A3,3,0,0,0,-42,45C-42,45,-42,45,-42,45L-15,34L15,45L43,36C44,35,45,34,45,33V-42A3,3,0,0,0,43,-45Z'),\n    \"map-layer\": draw('M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z'),\n    menu: draw('M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z'),\n    minus: draw('M35,5H-35V-5H35V5Z'),\n    \"minus-o\": draw('M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M-25,5H25V-5H-25'),\n    \"minus-small\": draw('M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M25,-5V5H-25V-5H25Z'),\n    ok: draw('M45,-25L-15,35L-42,8L-35,0L-15,21L38,-32L45,-25Z'),\n    pack: ['path', { fill: 0, d: 'M45,23C45,24,44,26,42,27L3,49C2,50,1,50,0,50C-1,50,-2,50,-3,49L-42,27C-44,26,-45,24,-45,23V-22C-45,-24,-44,-26,-42,-27L-3,-49C-2,-50,-1,-50,0,-50C1,-50,2,-50,3,-49L42,-27C44,-26,45,-24,45,-22V23M0,-39L-35,-20V20L0,39L35,20V-20L0,-39M0,-29L24,-15L0,-1L-24,-15L0,-29M25,14L5,26V8L25,-3V14M-5,26L-25,14V-3L-5,8V26Z' }],\n    plug: draw('M20,-25V-45H10V-25H-10V-45H-20V-25H-20C-25,-25,-30,-20,-30,-15V13L-12,30V45H13V30L30,13V-15C30,-20,25,-25,20,-25Z'),\n    plus: draw('M35,5H5V35H-5V5H-35V-5H-5V-35H5V-5H35V5Z'),\n    \"plus-o\": draw('M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M5,-25H-5V-5H-25V5H-5V25H5V5H25V-5H5V-25Z'),\n    \"plus-small\": draw('M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M-5,-25H5V-5H25V5H5V25H-5V5H-25V-5H-5V-25Z'),\n    print: ['path', {\n        fill: 0,\n        d: 'M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z'\n    }],\n    question: draw(\"M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z\"),\n    redo: draw('M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z'),\n    refresh: draw('M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z'),\n    right: ['path', { fill: 0, d: 'M-40,-5V5H20L-7,33L0,40L39,0L0,-40L-7,-32L20,-5H-40Z' }],\n    'right-double': draw('M10,-30L40,0,10,30M-40,-30L-10,0,-40,30'),\n    run: draw('M23,-32A10,10,0,0,0,33,-42A10,10,0,0,0,23,-52A10,10,0,0,0,13,-42A10,10,0,0,0,23,-32M5,37L10,15L20,25V55H30V18L20,8L23,-7C29,0,39,5,50,5V-5C41,-5,33,-9,28,-17L23,-25C22,-28,18,-30,15,-30C13,-30,13,-29,11,-29L-15,-18V5H-5V-12L4,-15L-4,25L-28,20L-30,30L5,37M-40,-15A5,5,0,0,1,-45,-20A5,5,0,0,1,-40,-25H-25V-15H-40M-35,-35A5,5,0,0,1,-40,-40A5,5,0,0,1,-35,-45H-10V-35H-35M-45,5A5,5,0,0,1,-50,0A5,5,0,0,1,-45,-5H-25V5H-45Z'),\n    search: draw('M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z'),\n    select: draw('M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z'),\n    sitemap: draw('M-15,-50V-20H-5V-5H-35C-41,-5,-45,-1,-45,5V20H-55V50H-25V20H-35V5H-5V20H-15V50H15V20H5V5H35V20H25V50H55V20H45V5C45,-1,41,-5,35,-5H5V-20H15V-50H-15Z'),\n    unselect: draw('M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z'),\n    share: draw('M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z'),\n    show: draw('M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z'),\n    speaker: draw('M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z'),\n    \"split-vertical\": draw('M30,20V5H15V50H5V-50H15V-5H30V-20L50,0L30,20M-50,0L-30,20V5H-15V50H-5V-50H-15V-5H-30V-20L-50,0Z'),\n    \"split-horizontal\": draw('M-20,30H-5V15H-50V5H50V15H5V30H20L0,50L-20,30M0,-50L-20,-30H-5V-15H-50V-5H50V-15H5V-30H20L0,-50Z'),\n    star: draw('M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z'),\n    stat: draw('M-45,50V-20H-25V50H-45M-10,50V-50H10V50H-10M25,50V10H45V50H25Z'),\n    'switch': draw('M-45,-40V3L-30,-12L-15,5C-10,10,-10,15,-10,15V45H10V10C10,10,10,5,7,0C5,-5,0,-10,0,-10L-15,-27L-2,-40M30,-40L8,-18L10,-15C10,-15,15,-10,17,-5C18,-3,19,-1,19,1L45,-25'),\n    'tri-down': draw('M-23,-17L0,6L23,-17L30,-10L0,20L-30,-10L-23,-17Z'),\n    'tri-left': draw('M17,23L-6,0L17,-23L10,-30L-20,0L10,30L17,23Z'),\n    'tri-right': draw('M-17,23L6,0L-17,-23L-10,-30L20,0L-10,30L-17,23Z'),\n    'tri-up': draw('M-23,17L0,-6L23,17L30,10L0,-20L-30,10L-23,17Z'),\n    twitter: draw('M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z'),\n    undo: draw('M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z'),\n    up: draw('M-30,30L0,-30,30,30'),\n    'up-double': draw('M-30,40L0,10,30,40M-30,-10L0,-40,30,-10'),\n    user: draw(\n        'M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z'\n    ),\n    wait: draw('M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z'),\n    \"zoom-in\": draw('M18,10L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18M-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10M0,-10H-10V0H-15V-10H-25V-15H-15V-25H-10V-15H0V-10Z'),\n    \"zoom-out\": draw('M18,10H14L12,9C17,3,20,-4,20,-12A33,33,0,0,0,-12,-45A33,33,0,0,0,-45,-12A33,33,0,0,0,-12,20C-4,20,3,17,9,12L10,14V18L35,43L43,35L18,10M-12,10C-25,10,-35,0,-35,-12C-35,-25,-25,-35,-12,-35C0,-35,10,-25,10,-12C10,0,0,10,-12,10M-25,-15H0V-10H-25V-15Z'),\n    warning: draw('M0,-50L-55,45H55M0,-30L38,35H-38M-5,-10V10H5V-10M-5,20V30H5V20')\n};\n\n\n// Synonyms.\nconst synonyms: { [name: string]: string } = {\n    add: \"plus\",\n    back: \"left\",\n    help: \"question\",\n    save: \"export\"\n};\nfor (const key of Object.keys(synonyms)) {\n    const val: string = synonyms[key];\n    iconsBook[key] = iconsBook[val];\n}\n","\"use strict\";\n\nimport * as React from \"react\";\nimport castBoolean from \"../converter/boolean\";\nimport castInteger from \"../converter/integer\";\nimport castUnit from \"../converter/unit\";\nimport { iconsBook, TIconDefinition } from \"../icons\";\nimport \"./icon.css\";\n\nenum EnumPenColor { B, F, P, PD, PL, S, SD, SL }\n\ninterface IIconProps {\n    visible?: boolean;\n    content?: string | TIconDefinition;\n    size?: string | number;\n    animate?: boolean;\n    flipH?: boolean;\n    flipV?: boolean;\n    rotate?: number;\n    pen0?: EnumPenColor;\n    pen1?: EnumPenColor;\n    pen2?: EnumPenColor;\n    pen3?: EnumPenColor;\n    pen4?: EnumPenColor;\n    pen5?: EnumPenColor;\n    pen6?: EnumPenColor;\n    pen7?: EnumPenColor;\n    onClick?: () => void;\n    onHide?: () => void;\n}\n\nexport default class Icon extends React.Component<IIconProps, {}> {\n    static isValidIconName(name: string): boolean {\n        return typeof iconsBook[name] !== 'undefined';\n    }\n\n    static getAllIconNames(): string[] {\n        return Object.keys(iconsBook).sort();\n    }\n\n    private refIcon: any;\n    private visible: boolean;\n    private timeoutHandle: number;\n\n    constructor(props: IIconProps) {\n        super(props);\n        this.refIcon = React.createRef();\n        this.visible = false;\n        this.timeoutHandle = 0;\n    }\n\n    triggerVisibleAnimation() {\n        const\n            elemIcon = this.refIcon.current,\n            visible = this.visible;\n        if (this.timeoutHandle) {\n            window.clearTimeout(this.timeoutHandle);\n            this.timeoutHandle = 0;\n        }\n        requestAnimationFrame(() => {\n            if (visible) elemIcon.classList.remove(\"zero\");\n            else {\n                elemIcon.classList.add(\"zero\");\n                const slot = this.props.onHide;\n                if (typeof slot === 'function') {\n                    this.timeoutHandle = window.setTimeout(slot, 300);\n                }\n            }\n        });\n    }\n\n    render() {\n        const\n            p = this.props,\n            visible = castBoolean(p.visible, true),\n            animate = castBoolean(p.animate, false),\n            flipH = castBoolean(p.flipH, false),\n            flipV = castBoolean(p.flipV, false),\n            size = castUnit(p.size, \"28px\"),\n            content = castContent(p.content),\n            rotate = castInteger(p.rotate, 0),\n            onClick = p.onClick,\n            classes = [\"tfw-view-icon\"];\n        const svgContent = createSvgContent(content, p);\n        if (!svgContent) return null;\n\n        if (animate) classes.push(\"animate\");\n        if (visible) classes.push(\"zero\");\n        if (typeof onClick === 'function') classes.push(\"active\");\n\n        let transform = \"\";\n        if (rotate !== 0) {\n            transform += `rotate(${rotate}deg) `;\n        }\n        if (flipH || flipV) {\n            transform += `scale(${flipH ? -1 : 1},${flipV ? -1 : 1})`;\n        }\n        const style: React.CSSProperties = { width: size, height: size };\n        if (transform.length > 0) style.transform = transform;\n\n        requestAnimationFrame(() => this.triggerVisibleAnimation());\n        this.visible = visible;\n\n        return (\n            <svg className={classes.join(\" \")}\n                ref={this.refIcon}\n                viewBox=\"-65 -65 130 130\"\n                preserveAspectRatio=\"xMidYMid\"\n                width={size}\n                height={size}\n                onClick={onClick}\n                style={style}>\n                {svgContent}\n                < g strokeWidth=\"6\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" >\n                    {createSvgContent(content, p)}\n                </g>\n            </svg>\n        );\n    }\n}\n\nfunction createSvgContent(def: TIconDefinition, props: IIconProps, key: string = \"\"): any {\n    const\n        elementName = def[0],\n        { attributes, children } = parseDef(def);\n\n    if (typeof elementName === 'undefined') return <g></g>;\n\n    const attribs: React.Attributes = manageColors(attributes);\n    if (key.length > 0) attributes.key = key;\n\n    return React.createElement(\n        elementName,\n        attribs,\n        children.map((child, index) => createSvgContent(child, props, `${index}`))\n    ) as React.ReactSVGElement;\n}\n\nconst CLASSES = [\"0\", \"1\", \"P\", \"PL\", \"PD\", \"S\", \"SL\", \"SD\"];\n\n/**\n * If the value of the attribute \"fill\" is an element of CLASSES,\n * it will be removed and replace with a class.\n * Same thing for the attibute \"stroke\".\n *\n * @example\n * manageColors({ fill: \"1\" }) === { className: \"thn-svg-fill-1\" }\n *\n * @param   attribs [description]\n * @param   props   [description]\n * @returns         [description]\n */\nfunction manageColors(attribs: { [key: string]: any }) {\n    // @TODO For special forms of \"fill\" and \"stroke\", add classes.\n    const classes = (attribs.className || \"\").split(\" \");\n\n    [\"fill\", \"stroke\"].forEach(attribName => {\n        const attribValue = attribs[attribName];\n        if (typeof attribValue === 'undefined') return;\n        const key = `${attribValue}`.toUpperCase();\n        if (CLASSES.indexOf(key) === -1) return;\n        delete attribs[attribName];\n        classes.push(`thm-svg-${attribName}${key}`);\n    });\n\n    attribs.className = classes.join(\" \").trim();\n    return attribs;\n}\n\nfunction parseDef([name, arg1, arg2]: TIconDefinition) {\n    let attributes: undefined | {},\n        children: undefined | any[];\n\n    if (Array.isArray(arg1)) children = arg1;\n    else if (typeof arg1 !== 'undefined') attributes = arg1;\n    if (Array.isArray(arg2)) children = arg2;\n    else if (typeof arg2 !== 'undefined') attributes = arg2;\n\n    if (typeof attributes === 'undefined') attributes = {};\n    if (typeof children === 'undefined') children = [];\n\n    return { attributes, children };\n}\n\nfunction castContent(content: string | TIconDefinition = \"ok\"): TIconDefinition {\n    if (Array.isArray(content)) return content;\n    return iconsBook[content] || [];\n}\n","export default function castInteger(v: any, defaultValue = 0): number {\n    const defVal = Math.floor(.5 + defaultValue);\n\n    switch (typeof v) {\n        case \"boolean\":\n            return v ? 1 : 0;\n        case \"number\":\n            return Math.floor(.5 + v);\n        case \"string\":\n            const text = v.trim().toLowerCase();\n            if (text.startsWith(\"0x\")) {\n                const hexa = parseInt(text.substr(2), 16);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            if (text.startsWith(\"0b\")) {\n                const hexa = parseInt(text.substr(2), 2);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            if (text.startsWith(\"0o\")) {\n                const hexa = parseInt(text.substr(2), 8);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            const num = parseFloat(text);\n            if (isNaN(num)) return defVal;\n            return Math.floor(.5 + num);\n        default:\n            return defVal;\n    }\n}\n","/**\n * @class Color\n * Fast color manipulations.\n * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\n * (saturation), and L (luminance) are all floats between 0 and 1.\n */\nexport default class Color {\n    public R: number;\n    public G: number;\n    public B: number;\n    public H: number;\n    public S: number;\n    public L: number;\n    public A: number;\n\n    constructor(codeCSS: string = \"#000000\") {\n        this.R = 0;\n        this.G = 0;\n        this.B = 0;\n        this.H = 0;\n        this.S = 0;\n        this.L = 0;\n        this.A = 1;\n\n        this.parse(codeCSS);\n    }\n\n    static mix(color1: Color, color2: Color, alpha: number=.5) {\n        const beta = 1 - alpha;\n        return Color.newRGBA(\n            alpha * color2.R + beta * color1.R,\n            alpha * color2.G + beta * color1.G,\n            alpha * color2.B + beta * color1.B,\n            alpha * color2.A + beta * color1.A\n        );\n    }\n\n    static newBlack() {\n        return Color.newRGB(0, 0, 0);\n    }\n\n    static newWhite() {\n        return Color.newRGB(1, 1, 1);\n    }\n\n    /**\n     * Create a new Color instance base on R,G,B channels.\n     *\n     * @param   {number} red - Value between 0 and 1.\n     * @param   {number} green - Value between 0 and 1.\n     * @param   {number} blue - Value between 0 and 1.\n     * @returns {Color} New instance of Color.\n     */\n    static newRGB(red: number, green: number, blue: number) {\n        const color = new Color();\n        color.R = red;\n        color.G = green;\n        color.B = blue;\n        color.A = 1;\n        return color;\n    }\n\n    /**\n     * Create a new Color instance base on R,G,B,A channels.\n     *\n     * @param   {number} red - Value between 0 and 1.\n     * @param   {number} green - Value between 0 and 1.\n     * @param   {number} blue - Value between 0 and 1.\n     * @param   {number} alpha - Value between 0 and 1.\n     * @returns {Color} New instance of Color.\n     */\n    static newRGBA(red: number, green: number, blue: number, alpha: number) {\n        const color = new Color();\n        color.R = red;\n        color.G = green;\n        color.B = blue;\n        color.A = alpha;\n        return color;\n    }\n\n    /**\n     * Parse a color writtent in CSS syntax.\n     *\n     * @param   {string} code - CSS color.\n     * @returns {boolean} `true` if the color has valid syntax.\n     */\n    parse(code: string = \"#000000\"): boolean {\n        const input = code.trim().toUpperCase();\n        if (this.parseHexa.call(this, input)) return true;\n        if (this.parseRGB.call(this, input)) return true;\n        if (this.parseRGBA.call(this, input)) return true;\n        if (this.parseHSL.call(this, input)) return true;\n        // @TODO parseHSLA.\n        return false;\n    }\n\n    /**\n     * @see https://en.wikipedia.org/wiki/Grayscale\n     * @this Color\n     * @returns {undefined}\n     */\n    luminance(): number {\n        return (0.2126 * this.R) + (0.7152 * this.G) + (0.0722 * this.B);\n    }\n\n    /**\n     * @returns {integer} 0 if the color is dark and 1 if it is light.\n     */\n    luminanceStep(): number {\n        return this.luminance() < .6 ? 0 : 1;\n    }\n\n    /**\n     * @this Color\n     * @returns {string} String value of the color. `#fd45a7`.\n     */\n    stringify() {\n        let color = hexa2(this.R * 255) + hexa2(this.G * 255) + hexa2(this.B * 255);\n        if (this.A < 1) {\n            color += hexa2(this.A * 255);\n        }\n        return `#${color}`;\n    }\n\n    copy() {\n        const newColor = new Color();\n        newColor.R = this.R;\n        newColor.G = this.G;\n        newColor.B = this.B;\n        newColor.A = this.A;\n        newColor.H = this.H;\n        newColor.S = this.S;\n        newColor.L = this.L;\n        return newColor;\n    }\n\n    /**\n         * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\n         * @this Color\n         * @returns {undefined}\n         */\n    hsl2rgb() {\n        const\n            H = 6 * this.H,\n            S = this.S,\n            L = this.L,\n            chroma = (1 - Math.abs(2 * L - 1)) * S,\n            x = chroma * (1 - Math.abs(H % 2 - 1));\n\n        let R = 0, G = 0, B = 0;\n\n        if (H < 3) {\n            if (H < 1) {\n                R = chroma; G = x; B = 0;\n            } else if (H < 2) {\n                R = x; G = chroma; B = 0;\n            } else {\n                // H == 2.\n                R = 0; G = chroma; B = x;\n            }\n        } else if (H < 4) {\n            R = 0; G = x; B = chroma;\n        } else if (H < 5) {\n            R = x; G = 0; B = chroma;\n        } else {\n            R = chroma; G = 0; B = x;\n        }\n\n        const shift = L - chroma * 0.5;\n        this.R = R + shift;\n        this.G = G + shift;\n        this.B = B + shift;\n    }\n\n    rgb2hsl() {\n        const R = this.R;\n        const G = this.G;\n        const B = this.B;\n\n        const min = Math.min(R, G, B);\n        const max = Math.max(R, G, B);\n        const delta = max - min;\n\n        this.L = 0.5 * (max + min);\n\n        if (delta < 0.000001) {\n            this.H = 0;\n            this.S = 0;\n        }\n        else {\n            this.S = delta / (1 - Math.abs(2 * this.L - 1));\n            if (max === R) {\n                if (G >= B) {\n                    this.H = INV6 * ((G - B) / delta);\n                } else {\n                    this.H = 1 - INV6 * ((B - G) / delta);\n                }\n            }\n            else if (max === G) {\n                this.H = INV6 * (2 + (B - R) / delta);\n            }\n            else {\n                this.H = INV6 * (4 + (R - G) / delta);\n            }\n        }\n    }\n\n    private parseHexa(text: string) {\n        if (text.charAt(0) !== '#') return false;\n        let R = 0, G = 0, B = 0, A = 1;\n\n        switch (text.length) {\n            case 4:\n                R = parseInt(text.charAt(1), 16) * INV15;\n                G = parseInt(text.charAt(2), 16) * INV15;\n                B = parseInt(text.charAt(3), 16) * INV15;\n                break;\n            case 5:\n                R = parseInt(text.charAt(1), 16) * INV15;\n                G = parseInt(text.charAt(2), 16) * INV15;\n                B = parseInt(text.charAt(3), 16) * INV15;\n                A = parseInt(text.charAt(4), 16) * INV15;\n                break;\n            case 7:\n                R = parseInt(text.substr(1, 2), 16) * INV255;\n                G = parseInt(text.substr(3, 2), 16) * INV255;\n                B = parseInt(text.substr(5, 2), 16) * INV255;\n                break;\n            case 9:\n                R = parseInt(text.substr(1, 2), 16) * INV255;\n                G = parseInt(text.substr(3, 2), 16) * INV255;\n                B = parseInt(text.substr(5, 2), 16) * INV255;\n                A = parseInt(text.substr(7, 2), 16) * INV255;\n                break;\n            default:\n        }\n\n        if (isNaN(R) || isNaN(G) || isNaN(B) || isNaN(A)) {\n            this.R = this.G = this.B = this.A = 0;\n        } else {\n            this.R = R;\n            this.G = G;\n            this.B = B;\n            this.A = A;\n        }\n\n        return true;\n    }\n\n    /**\n     * @param   {string} text - `rgb(200, 140, 50)`\n     * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\n     */\n    private parseRGB(text: string) {\n        const m = RX_RGB.exec(text);\n        if (!m) return false;\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\n        this.A = 1;\n        return true;\n    }\n\n    /**\n     * @param   {string} text - `rgba(200, 140, 50, 0.5)`\n     * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\n     */\n    private parseRGBA(text: string) {\n        const m = RX_RGBA.exec(text);\n        if (!m) return false;\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\n        this.A = clamp01(parseFloat(m[4]));\n        return true;\n    }\n\n    /**\n     * @param   {string} text - `hsl(200, 140, 50)`\n     * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\n     */\n    private parseHSL(text: string) {\n        const m = RX_HSL.exec(text);\n        if (!m) return false;\n        this.H = clamp01(parseInt(m[1], 10) * INV359);\n        this.S = clamp01(parseInt(m[2], 10) * INV99);\n        this.L = clamp01(parseInt(m[3], 10) * INV99);\n        this.A = 1;\n        this.hsl2rgb();\n        return true;\n    }\n}\n\nconst\n    INV6 = 1 / 6,\n    INV15 = 1 / 15,\n    INV99 = 1 / 99,\n    INV255 = 1 / 255,\n    INV359 = 1 / 359;\n\nconst RX_RGB = /^RGB[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\nconst RX_RGBA = /^RGBA[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9\\.]+([0-9\\.]+)/;\nconst RX_HSL = /^HSL[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\n\nfunction clamp01(value: number): number {\n    if (value < 0) return 0;\n    if (value > 1) return 1;\n    return value;\n}\n\nfunction hexa2(value: number) {\n    let out = Math.floor(value).toString(16);\n    if (out.length < 2) out = \"0\" + out;\n    return out;\n}\n","/**\n * Manage CSS styles.\n */\nexport default {\n    register: registerTheme,\n    apply: applyTheme,\n    bg0: makeGetCurrentColor(\"bg0\"),\n    bg1: makeGetCurrentColor(\"bg1\"),\n    bg2: makeGetCurrentColor(\"bg2\"),\n    bg3: makeGetCurrentColor(\"bg3\"),\n    bgP: makeGetCurrentColor(\"bgP\"),\n    bgPD: makeGetCurrentColor(\"bgPD\"),\n    bgPL: makeGetCurrentColor(\"bgPL\"),\n    bgS: makeGetCurrentColor(\"bgS\"),\n    bgSD: makeGetCurrentColor(\"bgSD\"),\n    bgSL: makeGetCurrentColor(\"bgSL\"),\n    isDark\n};\n\ninterface IStyle {\n    bg0?: string;\n    bg1?: string;\n    bg2?: string;\n    bg3?: string;\n    bgP?: string;\n    bgPD?: string;\n    bgPL?: string;\n    bgS?: string;\n    bgSD?: string;\n    bgSL?: string;\n    fg0?: string;\n    fg1?: string;\n    fg2?: string;\n    fg3?: string;\n    fgP?: string;\n    fgPD?: string;\n    fgPL?: string;\n    fgS?: string;\n    fgSD?: string;\n    fgSL?: string;\n    black?: string;\n    white?: string;\n    [key: string]: string | undefined;\n};\n\n\n//################################################################################\n\nimport \"./theme.css\"\nimport Color from \"./color\"\n\ninterface IThemes {\n    css: { [name: string]: HTMLStyleElement };\n    vars: { [name: string]: IStyle }\n    current: string | null;\n}\n\n// Used for luminance computations. Because we need to know which text color\n// can be used based on the background's luminance.\nconst COLOR = new Color();\n\nconst THEME_COLOR_NAMES = [\"0\", \"1\", \"2\", \"3\", \"P\", \"PD\", \"PL\", \"S\", \"SD\", \"SL\"];\nconst THEMES: IThemes = {\n    css: {},\n    vars: {},\n    current: null\n};\n\nfunction registerTheme(themeName: string, _style: IStyle) {\n    const style = completeWithDefaultValues(_style);\n    THEMES.vars[themeName] = style;\n\n    let codeCSS = codeVariables(themeName, style);\n    codeCSS += codeBackground(themeName, style);\n    codeCSS += codeElevation(themeName, style);\n    codeCSS += codeText(themeName, style);\n\n    let styleElement = THEMES.css[themeName];\n    if (!styleElement) {\n        styleElement = document.createElement(\"style\");\n        document.getElementsByTagName('head')[0].appendChild(styleElement);\n        THEMES.css[themeName] = styleElement;\n    }\n\n    styleElement.textContent = codeCSS;\n}\n\nfunction codeText(themeName: string, style: IStyle) {\n    let codeCSS = '';\n    for (let depth = 1; depth <= 10; depth++) {\n        THEME_COLOR_NAMES.forEach(function(colorName) {\n            const fgColorName = `fg${colorName}`;\n            const bgColorName = `bg${colorName}`;\n            const styleFgColorName: string = style[fgColorName] as string;\n            const styleBgColorName: string = style[bgColorName] as string;\n            const bgClass = \".thm-bg\" + colorName;\n            const fgClass = \".thm-fg\" + colorName;\n            for (let position = 1; position <= depth; position++) {\n                const piecesFG = [];\n                const piecesSVG = [];\n                const piecesBG = [];\n                for (let index = 1; index <= depth; index++) {\n                    piecesBG.push(position === index ? bgClass : '*');\n                    piecesSVG.push(position === index ? bgClass : '*');\n                    piecesFG.push(position === index ? fgClass : '*');\n                    if (index === depth) {\n                        piecesBG.push(piecesBG.pop() + \".thm-fg\");\n                        piecesFG.push(piecesFG.pop() + fgClass);\n                    }\n                }\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesBG.join(\" > \")\n                    + \" { color: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + removeTail(piecesBG.join(\" > \"), \".thm-fg\")\n                    + \" { color: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesFG.join(\" > \")\n                    + \" { color: \" + styleBgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesSVG.join(\" > \")\n                    + \" .thm-svg-fill0\"\n                    + \" { fill: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesSVG.join(\" > \")\n                    + \" .thm-svg-stroke0\"\n                    + \" { stroke: \" + styleFgColorName + \" }\\n\";\n            }\n        });\n    }\n    return codeCSS;\n}\n\nfunction codeVariables(themeName: string, style: IStyle) {\n    let codeCSS = \"body.dom-theme-\" + themeName + '{\\n';\n    THEME_COLOR_NAMES.forEach(function(colorName) {\n        const s = style[`bg${colorName}`] as string;\n        codeCSS += `  --thm-bg${colorName}: ${s};\\n`;\n        COLOR.parse(s);\n        const pen = COLOR.luminanceStep() ? style.black : style.white;\n        codeCSS += `  --thm-fg${colorName}: ${pen};\\n`;\n    });\n    codeCSS += `  --thm-white: ${style.white};\\n`;\n    codeCSS += `  --thm-black: ${style.black};\\n`;\n    codeCSS += \"}\\n\";\n    return codeCSS;\n}\n\n\nfunction codeBackground(themeName: string, style: IStyle) {\n    var codeCSS = '';\n    THEME_COLOR_NAMES.forEach(function(colorName) {\n        codeCSS += \"body.dom-theme-\" + themeName + \".thm-bg\" + colorName\n            + \" { background-color: \" + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-fg\" + colorName\n            + \" { color: \" + style[`fg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName\n            + \" { background-color: \" + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-bottom\"\n            + \" { background: linear-gradient(to top,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-top\"\n            + \" { background: linear-gradient(to bottom,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-left\"\n            + \" { background: linear-gradient(to right,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-right\"\n            + \" { background: linear-gradient(to left,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n\n        if (!isNaN(parseInt(colorName))) return;\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-svg-fill\" + colorName\n            + \" { fill: \"\n            + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-svg-stroke\" + colorName\n            + \" { stroke: \"\n            + style[`bg${colorName}`] + \" }\\n\";\n    });\n    return codeCSS;\n}\n\nconst ELEVATIONS: { [ele: string]: string[] } = {\n    \"0\": [\"none\"],\n    \"2\": [\"button\", \"card\"],\n    \"4\": [\"bar\"],\n    \"6\": [\"floating\"],\n    \"8\": [\"button:active\", \"button-raised\", \"card-raised\"],\n    \"9\": [\"sunmenu-0\"],\n    \"10\": [\"sunmenu-1\"],\n    \"11\": [\"sunmenu-2\"],\n    \"12\": [\"floating:active\"],\n    \"16\": [\"nav\"],\n    \"24\": [\"dialog\"]\n};\nfunction codeElevation(themeName: string, style: IStyle) {\n    COLOR.parse(style.bg2);\n    const luminance = COLOR.luminance();\n    var elevationColor = luminance < .6\n        ? addAlpha(style.white, 4)\n        : addAlpha(style.black, 6);\n    var codeCSS = '';\n    const elevationKeys = Object.keys(ELEVATIONS);\n    elevationKeys.forEach(function(elevationKey) {\n        const elevation = parseInt(elevationKey, 10);\n        ELEVATIONS[elevationKey].forEach(name => {\n            codeCSS += `body.dom-theme-${themeName} .thm-ele-${name} {\n  box-shadow: 0 ${elevation}px ${2 * elevation}px ${elevationColor}\n}\\n`;\n        })\n    });\n    return codeCSS;\n}\n\nfunction applyTheme(name: string, target: HTMLElement = document.body) {\n    if (!THEMES.css[name]) {\n        console.error(\"This theme has not been registered: \", name);\n        return;\n    }\n    var body = document.body;\n    if (typeof THEMES.current === 'string') {\n        body.classList.remove(`dom-theme-${THEMES.current}`);\n    }\n    THEMES.current = name;\n    body.classList.add(`dom-theme-${THEMES.current}`);\n}\n\nfunction completeBackgrounds(style: IStyle) {\n    let has0 = typeof style.bg0 === 'string';\n    const has1 = typeof style.bg1 === 'string';\n    const has2 = typeof style.bg2 === 'string';\n    let has3 = typeof style.bg3 === 'string';\n\n    if (has0 && has1 && has2 && has3) return\n\n    if (!has0 && !has1 && !has2 && !has3) {\n        style.bg0 = \"#E0E0E0\";\n        style.bg1 = \"#F5F5F5\";\n        style.bg2 = \"#FAFAFA\";\n        style.bg3 = \"#FFF\";\n        return;\n    }\n    if (has0 && !has1 && !has2 && !has3) {\n        style.bg3 = lightenBackground(style.bg0 as string);\n        has3 = true;\n    }\n    if (!has0 && !has1 && !has2 && has3) {\n        style.bg0 = darkenBackground(style.bg3 as string);\n        has3 = true;\n    }\n    const color0 = new Color(style.bg0);\n    const r0 = color0.R;\n    const g0 = color0.G;\n    const b0 = color0.B;\n    const color3 = new Color(style.bg3);\n    const r3 = color3.R;\n    const g3 = color3.G;\n    const b3 = color3.B;\n    const color1 = Color.newRGB((2 * r0 + r3) / 3, (2 * g0 + g3) / 3, (2 * b0 + b3) / 3);\n    const color2 = Color.newRGB((r0 + 2 * r3) / 3, (g0 + 2 * g3) / 3, (b0 + 2 * b3) / 3);\n    style.bg1 = color1.stringify();\n    style.bg2 = color2.stringify();\n}\n\nfunction completeWithDefaultValues(style: IStyle) {\n    if (typeof style === 'undefined') style = {};\n\n    completeBackgrounds(style);\n\n    if (typeof style.bgP !== 'string') style.bgP = \"#3E50B4\";\n    if (typeof style.bgPD !== 'string') style.bgPD = dark(style.bgP);\n    if (typeof style.bgPL !== 'string') style.bgPL = light(style.bgP);\n    if (typeof style.bgS !== 'string') style.bgS = rotateHue(style.bgP);\n    if (typeof style.bgSD !== 'string') style.bgSD = dark(style.bgS);\n    if (typeof style.bgSL !== 'string') style.bgSL = light(style.bgS);\n\n    if (typeof style.white !== 'string') style.white = '#fff';\n    if (typeof style.black !== 'string') style.black = '#000';\n\n    THEME_COLOR_NAMES.forEach(function(name) {\n        const bg: string = style[`bg${name}`] || '#000';\n        COLOR.parse(bg);\n        var luminance = COLOR.luminance();\n        style[`fg${name}`] = luminance < .6 ? style.white : style.black;\n    });\n\n    return style;\n}\n\nfunction dark(color: string) {\n    const percent = .25;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L *= 1 - percent;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction darkenBackground(color: string) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.max(0, COLOR.L - 0.15);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction light(color: string) {\n    var percent = .4;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = percent + (1 - percent) * COLOR.L;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction lightenBackground(color: string) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.min(1, COLOR.L + 0.3);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction rotateHue(color: string): string {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.H = COLOR.H + .5;\n    if (COLOR.H > 1) COLOR.H--;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\n/**\n * @param {string} color - RGB color in format #xxx or #xxxxxx.\n * @param {string} alpha - Single char between 0 and F.\n */\nfunction addAlpha(color: string, alpha: string) {\n    if (color.length < 5) return color + alpha;\n    return color + alpha + alpha;\n}\n\nfunction removeTail(text: string, tail: string) {\n    return text.substr(0, text.length - tail.length);\n}\n\nfunction isDark(colorName: string = \"\"): boolean {\n    if (colorName === \"\") return isThemeGloballyDark();\n\n    const vars = THEMES.vars[THEMES.current || \"default\"];\n    const varName = `$isDark/${colorName}`;\n    let isDark = vars[varName];\n    if (typeof isDark === 'boolean') return isDark;\n\n    const color = new Color(vars[colorName]);\n    vars[varName] = !color.luminanceStep();\n    return vars[varName];\n}\n\nfunction isThemeGloballyDark(): boolean {\n    const vars = THEMES.vars[THEMES.current || \"default\"];\n    let isDark = vars.$isDark;\n    if (typeof isDark === 'boolean') return isDark;\n\n    const bg0 = new Color(vars.bg0);\n    const bg1 = new Color(vars.bg1);\n    const bg2 = new Color(vars.bg2);\n    const bg3 = new Color(vars.bg3);\n    const average = Color.mix(\n        Color.mix(bg0, bg1),\n        Color.mix(bg2, bg3)\n    );\n    vars.$isDark = !average.luminanceStep();\n    return vars.$isDark;\n}\n\nfunction makeGetCurrentColor(colorName: string) : ()=>string {\n    return () => THEMES.vars[THEMES.current || \"default\"][colorName];\n}\n\nregisterTheme(\"default\", { bgP: \"#1e90ff\" });\n","const EMPTY_FUNCTION = () => { };\n\ntype TFunction = () => void;\n\n\nexport default function castBoolean(value: any, defaultValue: TFunction = EMPTY_FUNCTION): TFunction {\n    if (typeof value === 'function') return value;\n    return defaultValue;\n}\n","import Gesture from \"../gesture\"\nimport Theme from \"../theme\"\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\nimport castFunction from \"../converter/function\"\nimport \"./touchable.css\"\n\ninterface IArgs {\n    element?: HTMLElement;\n    enabled?: boolean;\n    color?: string;\n    onTap?: () => void;\n}\n\ninterface IRect {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n}\n\nexport default class Touchable {\n    _element: HTMLElement | undefined;\n    _enabled: boolean = true;\n    color: string = \"#000\";\n    accent: boolean = false;\n    onTap: () => void;\n\n    constructor(args: IArgs) {\n        this.element = args.element;\n        this.enabled = castBoolean(args.enabled, true);\n        this.color = castString(args.color, \"\");\n        this.onTap = castFunction(args.onTap);\n    }\n\n    fire(evt) {\n        if (!this.enabled) return;\n\n        const handler = this.onTap;\n        if (typeof handler === 'function') {\n            handler(evt);\n        }\n    }\n\n    get enabled() { return this._enabled; }\n    set enabled(value: boolean) { this._enabled = value; }\n\n    get element() { return this._element; }\n    set element(element: HTMLElement | undefined) {\n        const that = this;\n        if (typeof element === 'undefined') return;\n        Gesture(element).on({\n            keydown(evt) {\n                if (!that.enabled) return;\n\n                const key = evt.key;\n                if (key === \" \" || key === \"Enter\") {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    that.fire();\n                }\n            },\n\n            down(evt) {\n                if (!that.enabled) return;\n            },\n\n            up(evt) {\n                if (!that.removeTouchDisk) return;\n                that.removeTouchDisk();\n                delete that.removeTouchDisk;\n            },\n\n            tap(evt) {\n                if (!that.enabled) return;\n                that.fire(evt);\n\n                const rect = element.getBoundingClientRect();\n                const style = window.getComputedStyle(element);\n                const screen = createScreen(rect);\n                screen.style.borderRadius = style.getPropertyValue(\"border-radius\");\n                const x = evt.x || 0;\n                const y = evt.y || 0;\n                const w = Math.max(x, rect.width - x);\n                const h = Math.max(y, rect.height - y);\n                const radius = Math.ceil(1.1 * Math.sqrt(w * w + h * h));\n                const ripple = document.createElement(\"div\");\n                screen.appendChild(ripple);\n                ripple.style.left = `${x - radius}px`;\n                ripple.style.top = `${y - radius}px`;\n                ripple.style.width = `${2 * radius}px`;\n                ripple.style.height = `${2 * radius}px`;\n                if (that.color.length > 0) {\n                    ripple.style.background = that.color;\n                } else {\n                    ripple.style.background = Theme.isDark() ? \"#fff\" : \"#000\";\n                }\n                window.setTimeout(() => ripple.className = \"open\");\n                window.setTimeout(() => document.body.removeChild(screen), 500);\n            }\n        })\n    }\n}\n\n\nfunction createScreen(rect: IRect) {\n    const div = document.createElement(\"div\");\n    div.className = \"tfw-behavior-touchable\";\n    div.style.left = `${rect.left}px`;\n    div.style.top = `${rect.top}px`;\n    div.style.width = `${rect.width}px`;\n    div.style.height = `${rect.height}px`;\n    document.body.appendChild(div);\n    return div;\n}\n","import * as React from \"react\"\nimport Icon from \"./icon\"\nimport \"./button.css\"\nimport Touchable from \"../behavior/touchable\"\nimport castArray from \"../converter/array\"\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\n\ninterface IButtonProps {\n    label?: string;\n    icon?: string;\n    wide?: boolean;\n    wait?: boolean;\n    flat?: boolean;\n    small?: boolean;\n    warning?: boolean;\n    enabled?: boolean;\n    classes?: string[] | string;\n    tag?: any;\n    onClick?: (tag: any) => void;\n}\n\nexport default class Button extends React.Component<IButtonProps, {}> {\n    readonly touchable: Touchable;\n    readonly ref: React.RefObject<HTMLButtonElement>;\n\n    constructor(props: IButtonProps) {\n        super(props);\n        this.handleClick = this.handleClick.bind(this);\n        this.touchable = new Touchable({ onTap: this.handleClick });\n        this.ref = React.createRef();\n    }\n\n    componentDidMount() {\n        const element = this.ref.current;\n        if (!element) return;\n        this.touchable.element = element;\n    }\n\n    handleClick() {\n        const slot = this.props.onClick;\n        if (typeof slot !== 'function') return;\n        slot(this.props.tag);\n    }\n\n    render() {\n        const p = this.props,\n            label = castString(p.label, \"\"),\n            icon = castString(p.icon, \"\"),\n            wide = castBoolean(p.wide, false),\n            wait = castBoolean(p.wait, false),\n            flat = castBoolean(p.flat, false),\n            small = castBoolean(p.small, false),\n            enabled = !wait && castBoolean(p.enabled, true),\n            warning = castBoolean(p.warning, false),\n            classes = [\"tfw-view-button\"].concat(castArray(p.classes));\n        if (wide) classes.push(\"wide\");\n        if (flat) {\n            classes.push(\"flat\");\n            classes.push(warning ? \"thm-fgS\" : \"thm-fgP\");\n        }\n        else {\n            if (enabled) classes.push(\"thm-ele-button\");\n            classes.push(warning ? \"thm-bgS\" : \"thm-bgP\");\n        }\n        if (small) classes.push(\"small\");\n        if (label.length === 0) classes.push(\"floating\");\n\n        this.touchable.enabled = enabled;\n        return (\n            <button ref={this.ref}\n                className={classes.join(\" \")}\n                disabled={!enabled}>\n                {icon.length > 0\n                    ? <Icon content={icon}\n                        animate={wait}\n                        size={`${small ? 20 : 28}px`} />\n                    : null}\n                {label.length > 0\n                    ? <div className=\"text\" > {label} </div>\n                    : null}\n            </button>);\n    }\n}\n","import * as React from \"react\"\r\nimport castStringArray from \"../converter/string-array\"\r\nimport castBoolean from \"../converter/boolean\"\r\nimport Gesture from \"../gesture\"\r\nimport Button from \"./button\"\r\nimport \"./scroller.css\"\r\n\r\ntype THandleChange = (arg: { top: number; max: number }) => void;\r\n\r\ninterface IScrollerProps {\r\n    classes?: string[] | string;\r\n    refreshable?: boolean;\r\n    refreshing?: boolean;\r\n    onScrollChange?: THandleChange;\r\n    onRefreshAsked?: () => void;\r\n    children?: React.ReactElement<any> | React.ReactElement<any>[];\r\n}\r\n\r\nexport default class Scroller extends React.Component<IScrollerProps, {}> {\r\n    private ref = React.createRef();\r\n\r\n    onPanDown() {\r\n        const main = this.ref.current;\r\n        if (!main || main.scrollTop > 0) return;\r\n\r\n        const onRefresh = this.props.onRefreshAsked;\r\n        if (typeof onRefresh !== 'function') return;\r\n        onRefresh();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const div = this.ref.current;\r\n        if (!div) return;\r\n        Gesture(div).on({\r\n            pandown: evt => {\r\n                if (!castBoolean(this.props.refreshable, false)) return;\r\n                if (div.scrollTop > 0) return;\r\n                evt.clear();\r\n                div.classList.add(\"animate-refresh\");\r\n            },\r\n            swipedown: evt => {\r\n                if (!castBoolean(this.props.refreshable, false)) return;\r\n                if (div.scrollTop > 0) return;\r\n                evt.clear();\r\n                this.onPanDown();\r\n            },\r\n            up: () => div.classList.remove(\"animate-refresh\")\r\n        });\r\n        div.addEventListener(\"scroll\", () => {\r\n            const handler = this.props.onScrollChange;\r\n            if (typeof handler !== 'function') return;\r\n            handler({ top: div.scrollTop, max: div.scrollHeight - div.clientHeight });\r\n        }, false);\r\n    }\r\n\r\n    render() {\r\n        const classes = castStringArray(this.props.classes, []);\r\n        classes.push(\"tfw-view-scroller\");\r\n        if (castBoolean(this.props.refreshing, false)) {\r\n            classes.push(\"refreshing\");\r\n        }\r\n        if (castBoolean(this.props.refreshable, false)) {\r\n            return (<div className={classes.join(\" \")} ref={this.ref}>\r\n                <div className=\"body\">{this.props.children}</div>\r\n                <div className=\"screen\">\r\n                    <Button icon=\"refresh\" wait={true} />\r\n                </div>\r\n            </div>);\r\n        }\r\n        return (<div className={classes.join(\" \")} ref={this.ref}>{this.props.children}</div>);\r\n    }\r\n}\r\n","import * as React from \"react\"\nimport castArray from \"../converter/array\"\nimport castFunction from \"../converter/function\"\nimport castBoolean from \"../converter/boolean\"\nimport TouchableBehavior from \"../behavior/touchable\"\nimport \"./touchable.css\"\n\ninterface ITouchableProps {\n    enabled?: boolean;\n    onClick?: ()=>void;\n    classes?: string[];\n    color?: string;\n    children?: React.ReactElement<any>|React.ReactElement<any>[];\n}\n\nexport default class Touchable extends React.Component<ITouchableProps, {}> {\n    readonly touchable: TouchableBehavior;\n    private ref = React.createRef();\n\n    constructor(props: ITouchableProps) {\n        super(props);\n        this.handleClick = this.handleClick.bind(this);\n        this.touchable = new TouchableBehavior({onTap: this.handleClick, color: props.color});\n    }\n\n    componentDidMount() {\n        const element = this.ref.current;\n        if (!element) return;\n        this.touchable.element = element;\n    }\n\n    handleClick() {\n        const handler = this.props.onClick;\n        if( typeof handler === 'function') {\n            handler();\n        }\n    }\n\n    render() {\n        const p = this.props;\n        const enabled = castBoolean(p.enabled, true);\n        const classes = [\"tfw-view-touchable\"].concat(castArray(p.classes));\n        if( enabled ) classes.push(\"enabled\");\n        return <div ref={this.ref} tabIndex={0} className={classes.join(\" \")}>{\n            p.children\n        }</div>\n    }\n}\n","import React from \"react\"\r\nimport \"./card.css\"\r\nimport Touchable from \"../../tfw/view/touchable\"\r\nimport Theme from \"../../tfw/theme\"\r\n\r\nexport default class Card extends React.Component<{}, {}> {\r\n    ref = React.createRef();\r\n\r\n    render() {\r\n        return (<div className=\"guide-view-card thm-ele-button thm-bg2\">\r\n            <Touchable color={Theme.bgSL()}>{this.props.children}</Touchable>\r\n        </div>);\r\n    }\r\n}\r\n","import React from \"react\"\r\nimport castStringArray from \"../converter/string-array\"\r\nimport \"./image.css\"\r\n\r\ninterface IImageProps {\r\n    src: string;\r\n}\r\n\r\nexport default class Pack extends React.Component<IImageProps, {}> {\r\n    private ref = React.createRef();\r\n\r\n    componentDidUpdate() {\r\n        const div = this.ref.current;\r\n        if (!div) return;\r\n\r\n        const img = new Image();\r\n        img.onload = () => {\r\n            div.classList.add(\"show\");\r\n        }\r\n        img.onerror = () => {\r\n        }\r\n        img.src = this.props.src;\r\n    }\r\n\r\n    render() {\r\n        const p = this.props;\r\n        const classes = castStringArray(p.classes, []);\r\n        classes.push(\"tfw-view-image\");\r\n\r\n        return (<div ref={this.ref}\r\n            style={{ backgroundImage: `url(${p.src})` }}\r\n            className={classes.join(\" \")} />);\r\n    }\r\n}\r\n","import React from \"react\"\nimport { IPack } from \"../../types\"\nimport Card from \"./card\"\nimport Image from \"../../tfw/view/image\"\nimport \"./pack.css\"\n\ninterface IPackProps extends IPack {\n}\n\nfunction translate(text: any) {\n    if (typeof text === 'string') return text;\n    if (typeof text.fr === 'string') return text.fr;\n    return \"...\";\n}\n\nexport default class Pack extends React.Component<IPackProps, {}> {\n    render() {\n        const p = this.props;\n        return (<Card>\n            <div className=\"guide-view-pack\">\n                <Image classes=\"background\" src={p.background} />\n                <div className=\"title thm-bg2-top\">{translate(p.title)}</div>\n                <div className=\"desc\">{translate(p.shortDescription)}</div>\n            </div>\n        </Card>);\n    }\n}\n","import React from \"react\"\nimport { connect } from 'react-redux'\nimport Flex from \"./tfw/layout/flex\"\nimport Stack from \"./tfw/layout/stack\"\nimport Scroller from \"./tfw/view/scroller\"\n\nimport Pack from \"./guide/view/pack\"\nimport State from \"./state\"\nimport { IAppState } from \"./types\"\n\nimport \"./tfw/font/josefin.css\"\nimport \"./App.css\";\n\n\nclass App extends React.Component<IAppState, {}> {\n    componentDidMount() {\r\n    }\r\n\r\n    componentDidUpdate() {\r\n    }\n\n    render() {\n        return (<Stack value=\"main\">\n            <Scroller key=\"main\"\n                classes=\"thm-bg0\"\n                refreshable={true}\n            >{this.props.packs.map(pack => (\n                <Pack\n                    key={pack.id}\n                    id={pack.id}\n                    title={pack.title}\n                    background={pack.background}\n                    shortDescription={pack.shortDescription} />))\n                }</Scroller>\n        </Stack>)\n    }\n}\n\n\nfunction mapStateToProps(state: IAppState) {\n    const newState = {\n        packs: state.packs.slice(),\n        refreshingPacks: state.refreshingPacks\n    };\n    return newState;\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {};\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import Theme from \"../tfw/theme\"\n\nexport default { apply, register }\n\nTheme.register(\"default\", {\n    bgP: \"#2ca600\",\n    bgS: \"#FFA000\",\n    bg0: \"#C8C4C0\",\n    bg3: \"#FFF\"\n});\n\nfunction apply(name: string = \"default\") {\n    Theme.apply(name);\n}\n\nfunction register(name: string, theme: {}) {\n    Theme.register(name, theme);\n}\n","function msg(id: string, arg: any) {\n    window.onTrailPassionCoreMessage(id, arg);\n}\n\nconst MOCKS = {\n    getAppName(id: string) {\n        msg(id, \"Hybrid Guide\");\n    },\n\n    getInitialConfig(id: string) {\n        msg(id, {\n            title: \"Minervois-Carroux\",\n            theme: {\n                bgP: \"#33cbff\", bgS: \"#ff5c00\",\n                bg0: \"#000\", bg3: \"#666\"\n            }\n        });\n    },\n\n    getPackImage(id: string, packId: string) {\n        window.setTimeout(() => {\n            msg(id, `https://trail-passion.net/tfw/pub/pack/${packId}/bg.jpg`);\n        }, 100 + 300 * Math.random());\n    },\n\n    getPacks(id: string, forceRefresh = false) {\n        window.setTimeout(() => msg(id, [\n            {\n                id: 45, title: { fr: \"Audio guide\" },\n                shortDescription: { fr: \"Des circuits audio-guids pour tout les curieux qui veulent en savoir plus sur l'histoire de nos villages.\" }\n            },\n            {\n                id: 43, title: { fr: \"Randonnes  la journe\" },\n                shortDescription: { fr: \"Randonne  la journe pour une dcouverte de notre territoire.\" }\n            },\n            {\n                id: 56, title: { fr: \"Services\" },\n                shortDescription: { fr: \"Randonne  la journe pour une dcouverte de notre territoire.\" }\n            }\n        ]), 500 + 1000 * Math.random());\n    }\n}\n\n\nexport default MOCKS;\n","import MOCKS from \"./core-mocks\"\r\n\r\n/* exported window.TrailPassionCore */\r\nconst Api = {\r\n    getAppName: mock(\"getAppName\", (id: string) => window.TrailPassionCore.getAppName(id)),\r\n    getInitialConfig: mock(\"getInitialConfig\", (id: string) => window.TrailPassionCore.getInitialConfig(id)),\r\n    /**\r\n     */\r\n    getPackImage: mock(\"getPackImage\", (id: string, packId: string) => window.TrailPassionCore.getPackImage(id, packId)),\r\n    /**\r\n     * [msg description]\r\n     *\r\n     * @param   id  [description]\r\n     * @param   arg [description]\r\n     * @returns     [description]\r\n     */\r\n    getPacks: mock(\"getPacks\", (id: string) => window.TrailPassionCore.getPacks(id))\r\n};\r\n\r\nexport default Api;\r\n\r\n\r\nfunction mock(name: string, lambda: () => void): () => void {\r\n    if (window.TrailPassionCore && window.TrailPassionCore[name]) return lambda;\r\n    return MOCKS[name];\r\n}\r\n\r\nconsole.info(\"window.TrailPassionCore=\", window.TrailPassionCore);\r\nconsole.info(\"Api=\", Api);\r\n","/**\r\n * This application aims to be launched on mobile devices running Androd or iOS.\r\n * Such operating system will povide a global object called `TrailPassionCore`.\r\n * It is the only way out of our WebApp: we never access the web directly.\r\n *\r\n * In order to manage asynchronous calls to the mobile, we provide a single\r\n * callback: `window.onTrailPassionCoreMessage( id, message )`.\r\n */\r\n\r\nimport Api from \"./core-api\"\r\n\r\nexport default {\r\n    getAppName :wrap(\"getAppName\"),\r\n    getInitialConfig: wrap(\"getInitialConfig\"),\r\n    getPacks: wrap(\"getPacks\"),\r\n    getPackImage: wrap(\"getPackImage\")\r\n}\r\n\r\ntype TCallback = ({ }) => void;\r\n\r\nlet ID: number = 0;\r\nconst CALLBACKS: { [key: string]: { onMessage: TCallback, onError: TCallback } } = {};\r\n\r\nfunction register(id: string, onMessage: TCallback, onError: TCallback) {\r\n    CALLBACKS[id] = { onMessage, onError };\r\n}\r\n\r\nfunction unregister(id: string) {\r\n    delete CALLBACKS[id];\r\n}\r\n\r\nfunction wrap(funcName: string) {\r\n    const api: (...args: any[]) => void = Api[funcName];\r\n\r\n    return function(...args: any[]) {\r\n        return new Promise((resolve, reject) => {\r\n            const id = `_${ID++}_`;\r\n            const unreg = () => unregister(id);\r\n            const onMessage = (msg: any) => {\r\n                console.log(`Message from ${funcName}:`, msg);\r\n                unreg();\r\n                resolve(msg);\r\n            }\r\n            const onError = (err: any) => {\r\n                console.log(`Error from ${funcName}:`, err);\r\n                unreg();\r\n                reject(err);\r\n            }\r\n            register(id, onMessage, onError);\r\n            try {\r\n                api(id, ...args);\r\n            } catch (ex) {\r\n                console.error(`Exception in ${funcName}:`, ex);\r\n                onError(ex);\r\n            }\r\n        });\r\n    };\r\n}\r\n\r\nwindow.onTrailPassionCoreMessage = function(id: string, msg: any) {\r\n    const { onMessage } = CALLBACKS[id];\r\n    if (typeof onMessage !== 'function') {\r\n        throw Error(`There is no valid message callback with id=\"${id}\"!`);\r\n    }\r\n    window.setTimeout(() => onMessage(msg));\r\n}\r\n\r\nwindow.onTrailPassionCoreError = function(id: string, err: any) {\r\n    const { onError } = CALLBACKS[id];\r\n    if (typeof onError !== 'function') {\r\n        throw Error(`There is no valid error callback with id=\"${id}\"!`);\r\n    }\r\n    window.setTimeout(() => onError(err));\r\n}\r\n","import \"./splash.css\"\n\nconst DEFAULT_DURATION = 600;\n\nexport default {\n    /**\n     * Remove the logo after a fading of `duration` milliseconds.\n     *\n     * @param  {[type]} duration - Fading time in milliseconds.\n     */\n    hide(duration: number = DEFAULT_DURATION) {\n        const logo = document.getElementById(\"tp-logo\");\n        const parent = logo.parentNode;\n        logo.style.transition = `opacity ${duration}ms`;\n        setTimeout(() => {\n            logo.classList.add(\"hide\");\n            setTimeout(() => {\n                parent.removeChild(logo);\n            }, duration);\n        })\n    }\r\n};\n","/**\n * The full state of the application is stored and managed here.\n */\nimport { createStore } from 'redux'\nimport { IAppState, IAction, IPack } from \"../types\"\nimport castBoolean from \"../tfw/converter/boolean\"\n\nconst INITIAL_STATE: IAppState = {\n    packs: [],\n    setRefreshingPacks: false\n};\n\nfunction reducer(state: IAppState | undefined = INITIAL_STATE, action: IAction): IAppState {\n    try {\n        switch (action.type) {\n            case \"set-packs\": return update(setPacks, state, action);\n            case \"set-pack-background\": return update(setPackImage, state, action);\n            case \"set-refreshing-packs\": return update(setRefreshingPacks, state, action);\n        }\n        return state;\n    }\n    catch (ex) {\n        console.error(ex);\n    }\n}\n\n/**\n * Helper to make sure the returned state is not a mutation of the initial one.\n */\nfunction update(slot: (state: IAppState | undefined, action: IAction) => {},\n    state: IAppState | undefined,\n    action: IAction) {\n    return Object.assign({}, state, slot(state, action));\n}\n\nfunction setPacks(state: IAppState | undefined = INITIAL_STATE, action: IAction): {} {\n    return { packs: action.packs, refreshingPacks: false };\n}\n\nfunction setPackImage(state: IAppState | undefined = INITIAL_STATE, action: IAction): {} {\n    return {\n        packs: state.packs.map(pack => {\n            if (pack.id !== action.packId) return Object.assign({}, pack);\n            return Object.assign({}, pack, { background: action.url });\n        })\n    };\n}\n\nfunction setRefreshingPacks(state: IAppState | undefined = INITIAL_STATE, action: IAction): {} {\n    return { refreshingPacks: action.value };\n}\n\nconst store = createStore(reducer);\nexport default {\n    store, dispatch: store.dispatch,\n    setPacks(packs: IPack[]) { return { type: \"set-packs\", packs }; },\n    setPackImage(packId: string, url: string) { return { type: \"set-pack-background\", packId, url }; },\n    setRefreshingPacks() { return { type: \"set-refreshing-packs\", value: true }; }\n};\n","import React from \"react\";\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport App from \"./App\";\nimport Theme from \"./tp/theme\"\nimport Core from \"./guide/core\"\nimport Splash from \"./tp/splash\"\nimport State from \"./state\"\nimport { IPack } from \"./types\"\nimport \"./tfw/font/josefin.css\"\n\nimport \"./index.css\"\nimport Button from \"./tfw/view/button\"\n\nTheme.apply(\"default\");\n\nasync function debug() {\n    State.dispatch(State.setRefreshingPacks());\n\n    const appName = await Core.getAppName();\n    console.info(\"appName=\", appName);\n\n    const packs = await Core.getPacks();\n    State.dispatch(State.setPacks(packs));\n}\n\nasync function start() {\n    const config = await Core.getInitialConfig();\n\n    console.info(\"config=\", config);\n    Theme.register(\"default\", config.theme);\n    Theme.apply(\"default\");\n    ReactDOM.render(<Provider store={State.store}>\n        <App />\n        <Button icon=\"bug\" warning={true} small={false} classes=\"debug\"\n            onClick={debug} />\n    </Provider>, document.getElementById(\"root\"));\n    const packs = await Core.getPacks();\n    State.dispatch(State.setPacks(packs));\n    Splash.hide();\n    for (const pack of packs) {\n        if (typeof pack.background === \"string\") continue;\n        const url = await Core.getPackImage(pack.id);\n        State.dispatch({ type: \"set-pack-background\", packId: pack.id, url });\n    };\n}\n\n\nstart();\n"],"sourceRoot":""}
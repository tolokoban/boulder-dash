{"ast":null,"code":"import _regeneratorRuntime from \"/home/tolokoban/Code/github/boulder-dash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/tolokoban/Code/github/boulder-dash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/tolokoban/Code/github/boulder-dash/src/index.tsx\";\nimport React from \"react\";\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from \"./App\";\nimport Theme from \"./tp/theme\";\nimport Core from \"./guide/core\";\nimport Splash from \"./tp/splash\";\nimport State from \"./state\";\nimport \"./tfw/font/josefin.css\";\nimport \"./index.css\";\nimport Button from \"./tfw/view/button\";\nTheme.apply(\"default\");\n\nfunction debug() {\n  return _debug.apply(this, arguments);\n}\n\nfunction _debug() {\n  _debug = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var appName, packs;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            State.dispatch(State.setRefreshingPacks());\n            _context.next = 3;\n            return Core.getAppName();\n\n          case 3:\n            appName = _context.sent;\n            console.info(\"appName=\", appName);\n            _context.next = 7;\n            return Core.getPacks();\n\n          case 7:\n            packs = _context.sent;\n            State.dispatch(State.setPacks(packs));\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _debug.apply(this, arguments);\n}\n\nfunction start() {\n  return _start.apply(this, arguments);\n}\n\nfunction _start() {\n  _start = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var config, packs, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, pack, url;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return Core.getInitialConfig();\n\n          case 2:\n            config = _context2.sent;\n            console.info(\"config=\", config);\n            Theme.register(\"default\", config.theme);\n            Theme.apply(\"default\");\n            ReactDOM.render(React.createElement(Provider, {\n              store: State.store,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 33\n              },\n              __self: this\n            }, React.createElement(App, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 34\n              },\n              __self: this\n            }), React.createElement(Button, {\n              icon: \"bug\",\n              warning: true,\n              small: false,\n              classes: \"debug\",\n              onClick: debug,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 35\n              },\n              __self: this\n            })), document.getElementById(\"root\"));\n            _context2.next = 9;\n            return Core.getPacks();\n\n          case 9:\n            packs = _context2.sent;\n            State.dispatch(State.setPacks(packs));\n            Splash.hide();\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _iteratorError = undefined;\n            _context2.prev = 15;\n            _iterator = packs[Symbol.iterator]();\n\n          case 17:\n            if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n              _context2.next = 28;\n              break;\n            }\n\n            pack = _step.value;\n\n            if (!(typeof pack.background === \"string\")) {\n              _context2.next = 21;\n              break;\n            }\n\n            return _context2.abrupt(\"continue\", 25);\n\n          case 21:\n            _context2.next = 23;\n            return Core.getPackImage(pack.id);\n\n          case 23:\n            url = _context2.sent;\n            State.dispatch({\n              type: \"set-pack-background\",\n              packId: pack.id,\n              url: url\n            });\n\n          case 25:\n            _iteratorNormalCompletion = true;\n            _context2.next = 17;\n            break;\n\n          case 28:\n            _context2.next = 34;\n            break;\n\n          case 30:\n            _context2.prev = 30;\n            _context2.t0 = _context2[\"catch\"](15);\n            _didIteratorError = true;\n            _iteratorError = _context2.t0;\n\n          case 34:\n            _context2.prev = 34;\n            _context2.prev = 35;\n\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n\n          case 37:\n            _context2.prev = 37;\n\n            if (!_didIteratorError) {\n              _context2.next = 40;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 40:\n            return _context2.finish(37);\n\n          case 41:\n            return _context2.finish(34);\n\n          case 42:\n            ;\n\n          case 43:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this, [[15, 30, 34, 42], [35,, 37, 41]]);\n  }));\n  return _start.apply(this, arguments);\n}\n\nstart();","map":{"version":3,"sources":["/home/tolokoban/Code/github/boulder-dash/src/index.tsx"],"names":["React","ReactDOM","Provider","App","Theme","Core","Splash","State","Button","apply","debug","dispatch","setRefreshingPacks","getAppName","appName","console","info","getPacks","packs","setPacks","start","getInitialConfig","config","register","theme","render","store","document","getElementById","hide","pack","background","getPackImage","id","url","type","packId"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport App from \"./App\";\nimport Theme from \"./tp/theme\"\nimport Core from \"./guide/core\"\nimport Splash from \"./tp/splash\"\nimport State from \"./state\"\nimport { IPack } from \"./types\"\nimport \"./tfw/font/josefin.css\"\n\nimport \"./index.css\"\nimport Button from \"./tfw/view/button\"\n\nTheme.apply(\"default\");\n\nasync function debug() {\n    State.dispatch(State.setRefreshingPacks());\n\n    const appName = await Core.getAppName();\n    console.info(\"appName=\", appName);\n\n    const packs = await Core.getPacks();\n    State.dispatch(State.setPacks(packs));\n}\n\nasync function start() {\n    const config = await Core.getInitialConfig();\n\n    console.info(\"config=\", config);\n    Theme.register(\"default\", config.theme);\n    Theme.apply(\"default\");\n    ReactDOM.render(<Provider store={State.store}>\n        <App />\n        <Button icon=\"bug\" warning={true} small={false} classes=\"debug\"\n            onClick={debug} />\n    </Provider>, document.getElementById(\"root\"));\n    const packs = await Core.getPacks();\n    State.dispatch(State.setPacks(packs));\n    Splash.hide();\n    for (const pack of packs) {\n        if (typeof pack.background === \"string\") continue;\n        const url = await Core.getPackImage(pack.id);\n        State.dispatch({ type: \"set-pack-background\", packId: pack.id, url });\n    };\n}\n\n\nstart();\n"]},"metadata":{},"sourceType":"module"}